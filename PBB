import base64
exec(base64.b64decode('IyEvdXNyL2Jpbi9weXRob24zDQojY29kaW5nPXV0Zi04DQoNCiMjIE9wZW4gUmVzb3VyY2UgQ29kZSBOaWgsIEJ0dyBTZWJlbHVtIFJlY29kZCBGb2xsb3cgRHVsdSBHaXRodWIgR3VhIEFuamluZw0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIw0KIyBSZWNvZGU/IEJvbGVoICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjDQojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMNCiMgWWFuZyBQZW50aW5nIExpbmsgU3VicmVrIEphbmdhbiBEaSBHYW50aSEgICAgICAgICAgIw0KIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjDQojIENyZWF0ZWQgQnkgQmlpIERldiwgLy5CZGJzcywgIG9yYlhEICAgICAgICAgICAgICAgICMNCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIw0KIyBUaXBlIFB5dGhvbjMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjDQojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMNCiMgRmlsZSBOYW1lOiBwcmVtLnB5ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIw0KIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjDQojIEdpdGh1YjogaHR0cHM6Ly93d3cuZ2l0aHViLmNvbS9CaWlEZXYgICAgICAgICAgICAgICMNCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCg0KaW1wb3J0IHJlcXVlc3RzLG1lY2hhbml6ZSxiczQsc3lzLG9zLHN1YnByb2Nlc3MsdXVpZCxyYW5kb20sdGltZSxyZSxiYXNlNjQsdXJsbGliLGpzb24sdXJsbGliLnBhcnNlLGNvbmN1cnJlbnQuZnV0dXJlcw0KDQpmcm9tIHJhbmRvbSBpbXBvcnQgcmFuZGludA0KDQpmcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgcXVvdGUNCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IgYXMgVGhyZWFkUG9vbA0KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZQ0KZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXAgYXMgcGFyc2VyDQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQ0KY3VycmVudCA9IGRhdGV0aW1lLm5vdygpDQoNCnAgPSAiXHgxYlswOzM3bSINCnB1ID0gIlx4MWJbMDszN20iICMgcHV0aWgNCm0gPSAiXHgxYlswOzMxbSIgIyBtZXJhaA0KaCA9ICJceDFiWzA7MzJtIiAjIGhpamF1DQprID0gIlx4MWJbMDszNm0iICMga3VuaW5nDQpiID0gIlx4MWJbMDszNm0iICMgYmlydQ0KdSA9ICJceDFiWzA7MzVtIiAjIHVuZ3UNCm8gPSAiXHgxYlswOzM2bSIgIyBiaXJ1IG11ZGENCg0KaWYgKCJsaW51eCIgaW4gc3lzLnBsYXRmb3JtLmxvd2VyKCkpOg0KDQogICAgICAgIE4gPSAiXDAzM1swbSINCiAgICAgICAgRyA9ICJcMDMzWzA7OTJtIg0KICAgICAgICBPID0gIlwwMzNbMDs5N20iDQogICAgICAgIFIgPSAiXDAzM1swOzkxbSINCmVsc2U6DQoNCiAgICAgICAgTiA9ICIiDQogICAgICAgIEcgPSAiIg0KICAgICAgICBPID0gIiINCiAgICAgICAgUiA9ICIiDQoNCiMjIyBIRUFERVJTICMjIw0KDQpkZWYgYmFubmVyKCk6DQoJb3Muc3lzdGVtKCJjbGVhciIpDQoJcHJpbnQoZiIiIg0KIF9fX19fX18gICAgICAgX19fX19fICAgICAgX19fX19fICAgIA0KfF8gICBfXyBcICAgICB8XyAgIF8gXCAgICB8XyAgIF8gXCAgIA0KICB8IHxfXykgfCAgICAgfCB8XykgfCAgICAgIHwgfF8pIHwgIA0KICB8ICBfX18vICAgICAgfCAgX18nLiAgICAgIHwgIF9fJy4gIA0KIF98IHxfICAgICAgICBffCB8X18pIHwgICAgX3wgfF9fKSB8IA0KfF9fX19ffHtrfUFOVEFEIHtwdX18X19fX19fXy97a31BQkkge3B1fSB8X19fX19fXy97a31FUlNJTkFSICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCntwdX0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiIiIikNCg0KcGJiID0gJzQ2MDE4NzQwMzY0OTIwMTgnDQpwYW50YWQgPSAnNDYwOTc2NTk0NTcwMjgyNycNCmJhYmkgPSByYW5kb20uY2hvaWNlKFsnUmFoaW1rdSBhbmdlZCBtYXM6KScsICdLeWFhIGJvb2xrdSBhbmdlZCBtYXM6dicsICdIZWtlbCBoZWtlbCBiaXV0aXB1bGw6diddKQ0KdWE9Ik5va2lhQzItMDAvNS4wICgwNy4yMCkgUHJvZmlsZS9NSURQLTIuMSBDb25maWd1cmF0aW9uL0NMREMtMS4xIE1vemlsbGEvNS4wIEFwcGxlV2ViS2l0LzQyMCsgKEtIVE1MLCBsaWtlIEdlY2tvKSBTYWZhcmkvNDIwKyINCg0KdWEyPSJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTA7IE1pIDlUIFBybyBCdWlsZC9RS1ExLjE5MDgyNS4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvODguMC40MzI0LjE4MSBNb2JpbGUgU2FmYXJpLzUzNy4zNltGQkFOL0VNQTtGQkxDL2l0X0lUO0ZCQVYvMjM5LjAuMC4xMC4xMDk7XSINCmhvc3Q9Imh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSINCmlwcz1Ob25lDQp0cnk6DQoJYj1yZXF1ZXN0cy5nZXQoImh0dHA6Ly9pcC1hcGkuY29tL2pzb24vIikuanNvbigpWyJxdWVyeSJdDQoJaXBzPXJlcXVlc3RzLmdldCgiaHR0cDovL2lwLWFwaS5jb20vanNvbi8iK2IsaGVhZGVycz17IlJlZmVyZXIiOiJodHRwOi8vaXAtYXBpLmNvbS8iLCJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwiVXNlci1BZ2VudCI6Ik1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgTWkgOVQgUHJvIEJ1aWxkL1FLUTEuMTkwODI1LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OC4wLjQzMjQuMTgxIE1vYmlsZSBTYWZhcmkvNTM3LjM2W0ZCQU4vRU1BO0ZCTEMvaXRfSVQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdIn0pLmpzb24oKVsiY291bnRyeSJdLmxvd2VyKCkNCmV4Y2VwdDoNCglpcHM9Tm9uZQ0KDQpvayA9IFtdDQpjcCA9IFtdDQp0dGwgPVtdDQoNCmZyZWVmYWNlYm9vayA9ICJodHRwczovL2ZyZWUuZmFjZWJvb2suY29tIiAjVXBkYXRlIE1ldGhvZCENCg0KZHVyYXNpID0gc3RyKGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlZC0lbS0lWSIpKQ0KdGFodW4gPSBjdXJyZW50LnllYXINCmJ1bGFuID0gY3VycmVudC5tb250aA0KaGFyaSA9IGN1cnJlbnQuZGF5DQoNCmJyID0gbWVjaGFuaXplLkJyb3dzZXIoKQ0KYnIuc2V0X2hhbmRsZV9yb2JvdHMoRmFsc2UpDQpici5zZXRfaGFuZGxlX3JlZnJlc2gobWVjaGFuaXplLl9odHRwLkhUVFBSZWZyZXNoUHJvY2Vzc29yKCksbWF4X3RpbWU9MSkNCmJyLmFkZGhlYWRlcnMgPSBbKCdVc2VyLUFnZW50Jyx1YSldDQoNCmRlZiBqYWxhbihzZWxmLHRleHQpOg0KCQlmb3IgamFsYW4gaW4gdGV4dCsiXG4iOg0KCQkJc3lzLnN0ZG91dC53cml0ZShqYWxhbikNCgkJCXN5cy5zdGRvdXQuZmx1c2goKQ0KCQkJdGltZS5zbGVlcCgwLjAyKQ0KCQkJDQpkZWYgY2xlYXIoKToNCglpZiAiIGxpbnV4IiBpbiBzeXMucGxhdGZvcm0ubG93ZXIoKToNCgkJb3Muc3lzdGVtKCJjbGVhciIpDQoJZWxpZiAid2luIiBpbiBzeXMucGxhdGZvcm0ubG93ZXIoKToNCgkJb3Muc3lzdGVtKCJjbHMiKQ0KCWVsc2U6b3Muc3lzdGVtKCJjbGVhciIpDQogICAgDQpkZWYgbGFuZyhjb29raWVzKToNCglmPUZhbHNlDQoJcnI9YnM0LkJlYXV0aWZ1bFNvdXAocmVxdWVzdHMuZ2V0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbGFuZ3VhZ2UucGhwIixoZWFkZXJzPWhkY29rKCksY29va2llcz1jb29raWVzKS50ZXh0LCJodG1sLnBhcnNlciIpDQoJZm9yIGkgaW4gcnIuZmluZF9hbGwoImEiLGhyZWY9VHJ1ZSk6DQoJCWlmICJpZF9JRCIgaW4gaS5nZXQoImhyZWYiKToNCgkJCXJlcXVlc3RzLmdldCgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tLyIraS5nZXQoImhyZWYiKSxjb29raWVzPWNvb2tpZXMsaGVhZGVycz1oZGNvaygpKQ0KCQkJYj1yZXF1ZXN0cy5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9wcm9maWxlLnBocCIsaGVhZGVycz1oZGNvaygpLGNvb2tpZXM9Y29va2llcykudGV4dAkNCgkJCWlmICJhcGEgeWFuZyBhbmRhIHBpa2lya2FuIHNla2FyYW5nIiBpbiBiLmxvd2VyKCk6DQoJCQkJZj1UcnVlDQoJaWYgZj09VHJ1ZToNCgkJcmV0dXJuIFRydWUNCgllbHNlOg0KCQlleGl0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBXcm9uZyBDb29raWVzIikNCg0KZGVmIGJhc2Vjb29raWUoKToNCglpZiBvcy5wYXRoLmV4aXN0cygiLmNvayIpOg0KCQlpZiBvcy5wYXRoLmdldHNpemUoIi5jb2siKSAhPTA6DQoJCQlyZXR1cm4gZ2V0c19kaWN0X2Nvb2tpZXMob3BlbignLmNvaycpLnJlYWQoKS5zdHJpcCgpKQ0KCQllbHNlOmxvZ3MoKQ0KCWVsc2U6bG9ncygpDQoNCmRlZiBoZGNvaygpOg0KCWdsb2JhbCBob3N0LHVhDQoJaG9zdHM9aG9zdA0KCXI9eyJvcmlnaW4iOiBob3N0cywgImFjY2VwdC1sYW5ndWFnZSI6ICJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyIsICJhY2NlcHQtZW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsICJhY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCIsICJ1c2VyLWFnZW50IjogIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgTWkgOVQgUHJvIEJ1aWxkL1FLUTEuMTkwODI1LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OC4wLjQzMjQuMTgxIE1vYmlsZSBTYWZhcmkvNTM3LjM2W0ZCQU4vRU1BO0ZCTEMvaXRfSVQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdIiwgIkhvc3QiOiAiIi5qb2luKGJzNC5yZS5maW5kYWxsKCI6Ly8oLio/KSQiLGhvc3RzKSksICJyZWZlcmVyIjogaG9zdHMrIi9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCAiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLCAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6ICIxIiwgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifQ0KCXJldHVybiByDQoNCmRlZiBnZXRzX2Nvb2tpZXMoY29va2llcyk6DQoJcmVzdWx0PVtdDQoJZm9yIGkgaW4gZW51bWVyYXRlKGNvb2tpZXMua2V5cygpKToNCgkJaWYgaVswXT09bGVuKGxpc3QoY29va2llcy5rZXlzKCkpKS0xOnJlc3VsdC5hcHBlbmQoaVsxXSsiPSIrY29va2llc1tpWzFdXSkNCgkJZWxzZTpyZXN1bHQuYXBwZW5kKGlbMV0rIj0iK2Nvb2tpZXNbaVsxXV0rIjsgIikNCglyZXR1cm4gIiIuam9pbihyZXN1bHQpDQoNCmRlZiBnZXRzX2RpY3RfY29va2llcyhjb29raWVzKToNCglyZXN1bHQ9e30NCgl0cnk6DQoJCWZvciBpIGluIGNvb2tpZXMuc3BsaXQoIjsiKToNCgkJCXJlc3VsdC51cGRhdGUoe2kuc3BsaXQoIj0iKVswXTppLnNwbGl0KCI9IilbMV19KQ0KCQlyZXR1cm4gcmVzdWx0DQoJZXhjZXB0Og0KCQlmb3IgaSBpbiBjb29raWVzLnNwbGl0KCI7ICIpOg0KCQkJcmVzdWx0LnVwZGF0ZSh7aS5zcGxpdCgiPSIpWzBdOmkuc3BsaXQoIj0iKVsxXX0pDQoJCXJldHVybiByZXN1bHQNCg0KIA0KIyMjIENvbnRhY3QgSUcgIyMjIw0KZGVmIGlnZSgpOg0KICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgIGJhbm5lcigpDQogICAgaW5wdXQocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gT3BlbiBXYW5nc2FmZj8gIikNCiAgICBqYWxhbihwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gT3BlbiBXYW5nc2FmZi4uLiIpDQogICAgb3Muc3lzdGVtKCJ4ZGctb3BlbiBodHRwczovL3dhLm1lLzA4MTMyOTg2NjEzNCIpDQogICAgaW5wdXQocCsiIFtCQUNLXSIpDQogICAgbG9ncygpICAgDQogICAgDQojIyMgTE9HSU4gTUVUSE9ERSAjIyMNCmRlZiBsb2dzKCk6DQogIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICBiYW5uZXIoKQ0KICBwcmludCAoIiIpDQogIHByaW50KChwKyIgWyIraysiMDEiK3ArIl0gTG9naW4gVG9rZW4iKSkNCiAgcHJpbnQoKHArIiBbIitrKyIwMiIrcCsiXSBMb2dpbiBDb29raWVzIikpDQogIHByaW50KChwKyIgWyIraysiMDMiK3ArIl0gQ29udGFjdCBBdXRob3IiKSkNCiAgcHJpbnQoKHArIiBbIitrKyIwMCIrcCsiXSBFeGl0XG4iKSkNCiAgc2VrPWlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDaG9vc2U6ICIpDQogIGlmIHNlaz09IiI6DQogICAgcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBGaWxsIEluIFRoZSBDb3JyZWN0IikpDQogICAgbG9ncygpDQogIGVsaWYgc2VrPT0iMSIgb3Igc2VrPT0iMDEiOg0KICAgIGxvZ190b2tlbigpDQogIGVsaWYgc2VrPT0iMiIgb3Igc2VrPT0iMDIiOg0KICAgIGdlbigpDQogIGVsaWYgc2VrPT0iMyIgb3Igc2VrPT0iMDMiOg0KICAgIGlnZSgpDQogIGVsaWYgc2VrPT0iMCIgb3Igc2VrPT0iMDAiOg0KICAgIGV4aXQoKQ0KICBlbHNlOg0KICAgIHByaW50KChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gRmlsbCBJbiBUaGUgQ29ycmVjdCIpKQ0KICAgIGxvZ3MoKQ0KDQojIyMjIExPR0lOIFRPS0VOIE1FVEhPREQ6KQ0KIyBKYW5nYW4gSGFwdXMgTmFudGkgRXJvciEgS2FsbyBHYWsgUGVyY2F5YSBTaWxhaGthbiBIYXB1cyA6Vg0KDQpkZWYgbG9nX3Rva2VuKCk6DQogICAgb3Muc3lzdGVtKCJjbGVhciIpDQogICAgYmFubmVyKCkNCiAgICB0b2tldCA9IGlucHV0KHArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIFRva2VuOiAiKQ0KICAgIHRyeToNCiAgICAgICAgb3R3ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9hY2Nlc3NfdG9rZW49IiArIHRva2V0KQ0KICAgICAgICBhID0ganNvbi5sb2FkcyhvdHcudGV4dCkNCiAgICAgICAgbmFtYSA9IGFbIm5hbWUiXQ0KICAgICAgICB6ZWRkID0gb3BlbigibG9naW4udHh0IiwgInciKQ0KICAgICAgICB6ZWRkLndyaXRlKHRva2V0KQ0KICAgICAgICB6ZWRkLmNsb3NlKCkNCiAgICAgICAgcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBMb2dpbiBCZXJoYXNpbCEiKSkNCiAgICAgICAgamFsYW4oKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBQbGVhc2UgU3Vic2NyaWJlIE15IENoYW5uZWw6KSIpKQ0KICAgICAgICBvcy5zeXN0ZW0oJ3hkZy1vcGVuIGh0dHBzOi8veW91dHViZS5jb20vYy9vcmJYREJkYnNTJykNCiAgICAgICAgYm90X2ZvbGxvdygpDQogICAgICAgIG1lbnUoKQ0KICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgcHJpbnQoKHArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIFRva2VuIEludmFsaWQiKSkNCiAgICAgICAgb3Muc3lzdGVtKCJjbGVhciIpDQogICAgICAgIGxvZ3MoKQ0KDQpkZWYgZ2VuKCk6DQogICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgICAgICBiYW5uZXIoKQ0KICAgICAgICBjb29raWUgPSBpbnB1dChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSIrcCsiIENvb2tpZXM6ICIpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL20uZmFjZWJvb2suY29tL2NvbXBvc2VyL29jZWxvdC9hc3luY19sb2FkZXIvP3B1Ymxpc2hlcj1mZWVkI189XyIsIGhlYWRlcnMgPSB7DQogICAgICAgICAgICAgICAgInVzZXItYWdlbnQiICAgICAgICAgICAgICAgIDogIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjEuMDsgTUkgOCBCdWlsZC9PUE0xLjE3MTAxOS4wMTEpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS82OS4wLjM0OTcuODYgTW9iaWxlIFNhZmFyaS81MzcuMzYiLCAjIEphbmdhbiBEaSBHYW50aSBFYSBBbmppbmsuDQogICAgICAgICAgICAgICAgInJlZmVyZXIiICAgICAgICAgICAgICAgICAgIDogImh0dHBzOi8vbS5mYWNlYm9vay5jb20vIiwNCiAgICAgICAgICAgICAgICAiaG9zdCIgICAgICAgICAgICAgICAgICAgICAgOiAibS5mYWNlYm9vay5jb20iLA0KICAgICAgICAgICAgICAgICJvcmlnaW4iICAgICAgICAgICAgICAgICAgICA6ICJodHRwczovL20uZmFjZWJvb2suY29tIiwNCiAgICAgICAgICAgICAgICAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyIgOiAiMSIsDQogICAgICAgICAgICAgICAgImFjY2VwdC1sYW5ndWFnZSIgICAgICAgICAgIDogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43IiwNCiAgICAgICAgICAgICAgICAiY2FjaGUtY29udHJvbCIgICAgICAgICAgICAgOiAibWF4LWFnZT0wIiwNCiAgICAgICAgICAgICAgICAiYWNjZXB0IiAgICAgICAgICAgICAgICAgICAgOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCIsDQogICAgICAgICAgICAgICAgImNvbnRlbnQtdHlwZSIgICAgICAgICAgICAgIDogInRleHQvaHRtbDsgY2hhcnNldD11dGYtOCINCiAgICAgICAgICAgICAgICB9LCBjb29raWVzID0gew0KICAgICAgICAgICAgICAgICJjb29raWUiICAgICAgICAgICAgICAgICAgICA6IGNvb2tpZQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgZmluZF90b2tlbiA9IHJlLnNlYXJjaCgiKEVBQUFcdyspIiwgZGF0YS50ZXh0KQ0KICAgICAgICAgICAgICAgIGhhc2lsICAgID0gIlxuICogQ29va2llIEludmFsaWQgISEiIGlmIChmaW5kX3Rva2VuIGlzIE5vbmUpIGVsc2UgIlxuKiBZb3VyIGZiIGFjY2VzcyB0b2tlbiA6ICIgKyBmaW5kX3Rva2VuLmdyb3VwKDEpDQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoNCiAgICAgICAgICAgICAgICBwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gTm8gQ29ubmVjdGlvbiIpKQ0KICAgICAgICBjb29raWUgPSBvcGVuKCJsb2dpbi50eHQiLCAidyIpDQogICAgICAgIGNvb2tpZS53cml0ZShmaW5kX3Rva2VuLmdyb3VwKDEpKQ0KICAgICAgICBjb29raWUuY2xvc2UoKQ0KICAgICAgICBwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gTG9naW4gQmVyaGFzaWwhIikpDQogICAgICAgIGphbGFuKChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gUGxlYXNlIFN1YnNjcmliZSBNeSBDaGFubmVsIDopIikpDQogICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly95b3V0dWJlLmNvbS9jL29yYlhEQmRic1MnKQ0KICAgICAgICBib3RfZm9sbG93KCkNCiAgICAgICAgbWVudSgpDQoNCg0Ka29tdHdvbCA9IHJhbmRvbS5jaG9pY2UoWyJTYWxhbSAyIEphcmkgQmFuZyIsICJTZW5zZWkgVGVyYmFlayBMYWggIiwgImJhbmcgbHUga2drIHB1bnlhIHBhY2FyPyIsICJNZW5nS2VyZW4gTGFoIEJhbmciLCAiU2VtYW5nYXQgQmFuZyEiLCAiR3VhIE11cmlkIEx1IEJhbmciLCAiQmppciBCaWlEZXYgRmVtZXMgQ3VrIEd1YSBBbXBlIE1yaW5kaW5nIiwgIlR1bWJlbiBQb3N0IEJhbmc/IiwgIkd1YSBQZW5naW4gSmFkaSBLZWsgTHUgQmFuZyIsICJTZW1vZ2EgQWJhbmcgSmFkaSBPcmFuZyBTdWtzZXMiLCAiQmppciBMYXdhY2sgS2FsaSBLYXUgQmFuZyJdKQ0KDQprb21lbiA9IGtvbXR3b2wNCg0KZGVmIGJvdF9mb2xsb3coKToNCgl0cnk6DQoJCXRva2V0PW9wZW4oImxvZ2luLnR4dCIsInIiKS5yZWFkKCkNCgkJb3R3ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS8/YWNjZXNzX3Rva2VuPSIrdG9rZXQpDQoJCWEgPSBqc29uLmxvYWRzKG90dy50ZXh0KQ0KCQluYW1hID0gYVsibmFtZSJdDQoJCWlkID0gYVsiaWQiXQ0KCWV4Y2VwdCBJT0Vycm9yOg0KCQlwcmludCgocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIFRva2VuIEludmFsaWQiKSkNCgkJbG9ncygpDQoJcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDAyNjY0MjgyNjA3L3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpICMgRWJpbmshDQoJcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDAwNDE5NjM5NDMwL3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpICMgTWV5eQ0KCXJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMDAyNzI5NDE1OTI1NS9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KSAjIEFzdWFuIFJ5byBYeW91bmFhDQoJcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTAwMDAwMDg0MDIyNjQ1L3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpICMgVW5rbm93DQoJcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMjMyNTUwNTEwNzY4MDEzNi9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KSAjIFVua25vdw0KIyAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vNDYwOTc2NTk0NTcwMjgyNy9jb21tZW50cy8/bWVzc2FnZT0nICtiYWJpKyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpDQogIyAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS80NjAxODc0MDM2NDkyMDE4L2NvbW1lbnRzLz9tZXNzYWdlPScrdG9rZXQrJyZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQ0KICAjICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vNDYwOTc2NTk0NTcwMjgyNy9jb21tZW50cy8/bWVzc2FnZT0nK2JhYmkrJyZhY2Nlc3NfdG9rZW49JyArdG9rZXQpDQoJbWVudSgpDQoNCg0KIyMjIE1BSU4gTUVOVSAjIyMNCg0KZGVmIG1lbnUoKToNCiAgICBnbG9iYWwgdWENCiAgICB0cnk6DQogICAgICAgIHRva2V0ID0gb3BlbigibG9naW4udHh0IiwiciIpLnJlYWQoKQ0KICAgICAgICBvdHcgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lLz9hY2Nlc3NfdG9rZW49Iit0b2tldCkNCiAgICAgICAgYSA9IGpzb24ubG9hZHMob3R3LnRleHQpDQogICAgICAgIG5hbWEgPSBhWyJmaXJzdF9uYW1lIl0NCiAgICAgICAgdHRsID0gYVsiYmlydGhkYXkiXQ0KICAgICAgICBpZCA9IGFbImlkIl0NCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHByaW50KChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIiBFcnJvciA6ICVzIiVlKSkNCiAgICAgICAgbG9ncygpDQogICAgaXAgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vYXBpLmlwaWZ5Lm9yZyIpLnRleHQNCiAgICBvcy5zeXN0ZW0oImNsZWFyIikNCiAgICBiYW5uZXIoKQ0KICAgIHByaW50DQogICAgcHJpbnQoKG8rIlsiK3ArIiBXZWxrb21iZWsgRGVrIFwwMzNbMDszMW0iK25hbWErbysiIF0iK3ApKQ0KICAgIHByaW50KCJcbisiKyItIio0MCsiKyIpDQogICAgcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSIrcCsiIFlvdXIgSUQgICAgICA6IFwwMzNbMDszNm0iK2lkKSkNCiAgICBwcmludCgocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIitwKyIgWW91ciBUVEwgICAgIDogXDAzM1swOzM2bSIrdHRsKSkNCiAgICBwcmludCgocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIitwKyIgWW91ciBKb2luZWQgIDogXDAzM1swOzM2bSIrZHVyYXNpKSkNCiAgICBwcmludChwKyIrIisiLSIqNDArIisiKQ0KICAgIHByaW50KChwKyJcbiBbIitrKyIwMSIrcCsiXSIrcCsiIENyYWNrIElEIEZyb20gUHVibGljL0ZyaWVuZGxpc3QiKSkNCiAgICBwcmludCgocCsiIFsiK2srIjAyIitwKyJdIitwKyIgQ3JhY2sgSUQgRnJvbSBMaWtlcnMgUG9zdCIpKQ0KICAgIHByaW50KChwKyIgWyIraysiMDMiK3ArIl0iK3ArIiBDcmFjayBJRCBGcm9tIEZvbGxvd2VycyIpKQ0KICAgIHByaW50KChwKyIgWyIraysiMDQiK3ArIl0iK3ArIiBDcmFjayBQaG9uZSBOdW1iZXIiKSkNCiAgICBwcmludCgocCsiIFsiK2srIjA1IitwKyJdIitwKyIgQ3JhY2sgRW1haWwiKSkNCiAgICBwcmludCgocCsiIFsiK2srIjA2IitwKyJdIitwKyIgQ2VrIE9wc2kgQWt1biBDcCIpKQ0KICAgIHByaW50KChwKyIgWyIraysiMDciK3ArIl0iK3ArIiBTZXR0aW5nIFVzZXIgQWdlbnQiKSkNCiAgICBwcmludCgocCsiIFsiK2srIjAwIitwKyJdIitwKyIgTG9nb3V0ICIpKQ0KICAgIGNob29zZV9tZW51KCkNCg0KZGVmIGNob29zZV9tZW51KCk6DQoJcj1pbnB1dChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDaG9vc2U6ICIpDQoJaWYgcj09IiI6DQoJCXByaW50KChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gRmlsbCBJbiBUaGUgQ29ycmVjdCIpKQ0KCQltZW51KCkNCgllbGlmIHI9PSIxIiBvciByPT0iMDEiOg0KCQlwdWJsaWsoKQ0KCWVsaWYgcj09IjIiIG9yIHI9PSIwMiI6DQoJCWxpa2VycygpDQoJZWxpZiByPT0iMyIgb3Igcj09IjAzIjoNCgkJZm9sbG93KCkNCgllbGlmIHI9PSI0IiBvciByPT0iMDQiOg0KCQlyYW5kb21fbnVtYmVycygpDQoJZWxpZiByPT0iNSIgb3Igcj09IjA1IjoNCgkJcmFuZG9tX2VtYWlsKCkNCgllbGlmIHI9PSI2IiBvciByPT0iMDYiOg0KCSAgICBjZWtfb3BzaSgpDQoJZWxpZiByPT0iNyIgb3Igcj09IjA3IjoNCgkJc2V0dGluZ191YSgpDQoJZWxpZiByPT0iMCIgb3Igcj09IjAwIjoNCgkJdHJ5Og0KCQkJb3Muc3lzdGVtKCJybSAtcmYgbG9naW4udHh0IikNCgkJCWV4aXQoKQ0KCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQoJCQlwcmludCgocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEVycm9yICVzIiVlKSkNCgllbHNlOg0KCQlwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gV3JvbmcgSW5wdXQiKSkNCgkJbWVudSgpCQ0KDQpkZWYgcGlsaWhjcmFjayhmaWxlKToNCiAgcHJpbnQoIlxuXDAzM1swOzk2bSBbIFwwMzNbMDszN21DaG9vc2UgTWV0aG9kZSBDcmFja1wwMzNbMDszNm0gXVwwMzNbMDszN20iKQ0KICBwcmludCgocCsiXG4gWyIraysiMDEiK3ArIl0gQ3JhY2sgV2l0aCBBcGkuRmFjZWJvb2siKSkNCiAgcHJpbnQoKHArIiBbIitrKyIwMiIrcCsiXSBDcmFjayBXaXRoIEFwaS5GYWNlYm9vayArIFRUTCAiKSkNCiAgcHJpbnQoKHArIiBbIitrKyIwMyIrcCsiXSBDcmFjayBXaXRoIE1iYXNpYy5GYWNlYm9vayIpKQ0KICBwcmludCgocCsiIFsiK2srIjA0IitwKyJdIENyYWNrIFdpdGggTWJhc2ljLkZhY2Vib29rICsgVFRMIikpDQogIHByaW50KChwKyIgWyIraysiMDUiK3ArIl0gQ3JhY2sgV2l0aCBUb3VjaC5GYWNlYm9vayIpKQ0KICBwcmludCgocCsiIFsiK2srIjA2IitwKyJdIENyYWNrIFdpdGggVG91Y2guRmFjZWJvb2sgKyBUVEwgIikpDQogIHByaW50KChwKyIgWyIraysiMDciK3ArIl0gQ3JhY2sgV2l0aCBNLkZhY2Vib29rICIpKQ0KICBwcmludCgocCsiIFsiK2srIjA4IitwKyJdIENyYWNrIFdpdGggTS5GYWNlYm9vayArIFRUTCAiKSkNCiAgcHJpbnQoKHArIiBbIitrKyIwOSIrcCsiXSBDcmFjayBXaXRoIEZyZWUuRmFjZWJvb2sgIikpDQogIHByaW50KChwKyIgWyIraysiMTAiK3ArIl0gQ3JhY2sgV2l0aCBGcmVlLkZhY2Vib29rICsgVFRMICIpKQ0KICBwcmludCgocCsiIFsiK2srIjAwIitwKyJdIEJhY2sgVG8gTWVudSAiKSkNCiAga3JhaD1pbnB1dChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDaG9vc2UgOiAiKQ0KICBpZiBrcmFoIGluWyIiXToNCiAgICBwcmludCgocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEZpbGwgSW4gVGhlIENvcnJlY3QiKSkNCiAgICBwaWxpaGNyYWNrKGZpbGUpDQogIGVsaWYga3JhaCBpblsiMSIsIjAxIl06DQogICAgYmFwaShmaWxlKQ0KICBlbGlmIGtyYWggaW5bIjIiLCIwMiJdOg0KICAgIGJhcGl0dGwoZmlsZSkNCiAgZWxpZiBrcmFoIGluWyIzIiwiMDMiXToNCiAgICBjcmFjayhmaWxlKQ0KICBlbGlmIGtyYWggaW5bIjQiLCIwNCJdOg0KICAgIGNyYWNrdHRsKGZpbGUpDQogIGVsaWYga3JhaCBpblsiNSIsIjA1Il06DQogICAgdG9mYmUoZmlsZSkNCiAgZWxpZiBrcmFoIGluWyI2IiwiMDYiXToNCiAgICB0b2ZiZXR0bChmaWxlKQ0KICBlbGlmIGtyYWggaW5bIjciLCIwNyJdOg0KICAgIGNyZWttKGZpbGUpDQogIGVsaWYga3JhaCBpblsiOCIsIjA4Il06DQogICAgY3Jla210dGwoZmlsZSkNCiAgZWxpZiBrcmFoIGluWyI5IiwiMDkiXToNCiAgICBmcmVlZmIoZmlsZSkNCiAgZWxpZiBrcmFoIGluWyIxMCJdOg0KICAgIGZyZWVmYnR0bChmaWxlKQ0KICBlbGlmIGtyYWggaW5bIjAiLCIwMCJdOg0KICAgIG1lbnUoKQ0KICBlbHNlOg0KICAgIHByaW50KChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gIEZpbGwgSW4gVGhlIENvcnJlY3QiKSkNCiAgICBwaWxpaGNyYWNrKGZpbGUpDQoNCiMjIyBEVU1QIElEICMjIw0KDQpkZWYgcHVibGlrKCk6DQoJdHJ5Og0KCQl0b2tldD1vcGVuKCJsb2dpbi50eHQiLCJyIikucmVhZCgpDQoJZXhjZXB0IElPRXJyb3I6DQoJCXByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDb29raWUvVG9rZW4gSW52YWxpZCIpKQ0KCQlvcy5zeXN0ZW0oInJtIC1yZiBsb2dpbi50eHQiKQ0KCQlsb2dzKCkNCgl0cnk6DQoJCXByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBUeXBlIFwnbWVcJyBEdW1wIEZyb20gRnJpZW5kbGlzdCIpKQ0KCQlpZHQgPSBpbnB1dChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gVXNlciBJRCBUYXJnZXQ6ICIpDQoJCXRyeToNCgkJCWpvayA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIj9hY2Nlc3NfdG9rZW49Iit0b2tldCkNCgkJCW9wID0ganNvbi5sb2Fkcyhqb2sudGV4dCkNCgkJCXByaW50KChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gTmFtZTogIitvcFsibmFtZSJdKSkNCgkJZXhjZXB0IEtleUVycm9yOg0KCQkJcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBJRCBOb3QgRm91bmQiKSkNCgkJCXByaW50KChwKyJcbiBbQkFDS10iK3ApKQ0KCQkJbWVudSgpDQoJCXI9cmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiL2ZyaWVuZHM/bGltaXQ9MTAwMDAmYWNjZXNzX3Rva2VuPSIrdG9rZXQpDQoJCWlkID0gW10NCgkJej1qc29uLmxvYWRzKHIudGV4dCkNCgkJcXEgPSAob3BbImZpcnN0X25hbWUiXSsiLmpzb24iKS5yZXBsYWNlKCIgIiwiXyIpDQoJCXlzID0gb3BlbihxcSAsICJ3IikjLnJlcGxhY2UoIiAiLCJfIikNCgkJZm9yIGEgaW4gelsiZGF0YSJdOg0KCQkJaWQuYXBwZW5kKGFbImlkIl0rIjw9PiIrYVsibmFtZSJdKQ0KCQkJeXMud3JpdGUoYVsiaWQiXSsiPD0+IithWyJuYW1lIl0rIlxuIikNCgkJeXMuY2xvc2UoKQ0KCQlwcmludCgocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIFRvdGFsIElEIDogJXMiJShsZW4oaWQpKSkpDQoJCXJldHVybiBwaWxpaGNyYWNrKHFxKQ0KCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCgkJZXhpdChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBFcnJvciA6ICVzIiVlKQ0KDQpkZWYgbGlrZXJzKCk6DQoJdHJ5Og0KCQl0b2tldD1vcGVuKCJsb2dpbi50eHQiLCJyIikucmVhZCgpDQoJZXhjZXB0IElPRXJyb3I6DQoJCXByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDb29raWUvVG9rZW4gSW52YWxpZCIpKQ0KCQlvcy5zeXN0ZW0oInJtIC1yZiBsb2dpbi50eHQiKQ0KCQlsb2dzKCkNCgl0cnk6DQoJCWlkdCA9IGlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBJRCBQb3N0IFRhcmdldDogIikNCgkJdHJ5Og0KCQkJam9rID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiP2FjY2Vzc190b2tlbj0iK3Rva2V0KQ0KCQkJb3AgPSBqc29uLmxvYWRzKGpvay50ZXh0KQ0KCQkJcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBOYW1lOiAiK29wWyJuYW1lIl0pKQ0KCQlleGNlcHQgS2V5RXJyb3I6DQoJCQlwcmludCgocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIElEIE5vdCBGb3VuZCIpKQ0KCQkJcHJpbnQoKHArIlxuIFtCQUNLXSIrcCkpDQoJCQltZW51KCkNCgkJcj1yZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyIvbGlrZXM/bGltaXQ9MTAwMDAwJmFjY2Vzc190b2tlbj0iK3Rva2V0KQ0KCQlpZCA9IFtdDQoJCXo9anNvbi5sb2FkcyhyLnRleHQpDQoJCXFxID0gKG9wWyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQ0KCQl5cyA9IG9wZW4ocXEgLCAidyIpIy5yZXBsYWNlKCIgIiwiXyIpDQoJCWZvciBhIGluIHpbImRhdGEiXToNCgkJCWlkLmFwcGVuZChhWyJpZCJdKyI8PT4iK2FbIm5hbWUiXSkNCgkJCXlzLndyaXRlKGFbImlkIl0rIjw9PiIrYVsibmFtZSJdKyJcbiIpDQoJCXlzLmNsb3NlKCkNCgkJcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBUb3RhbCBJRCA6ICVzIiUobGVuKGlkKSkpKQ0KCQlyZXR1cm4gcGlsaWhjcmFjayhxcSkNCglleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQoJCWV4aXQocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gRXJyb3IgOiAlcyIlZSkNCg0KZGVmIGZvbGxvdygpOg0KCXRyeToNCgkJdG9rZXQ9b3BlbigibG9naW4udHh0IiwiciIpLnJlYWQoKQ0KCWV4Y2VwdCBJT0Vycm9yOg0KCQlwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQ29va2llL1Rva2VuIEludmFsaWQiKSkNCgkJb3Muc3lzdGVtKCJybSAtcmYgbG9naW4udHh0IikNCgkJbG9ncygpDQoJdHJ5Og0KCQlpZHQgPSBpbnB1dChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gRm9sbG93ZXJzIElEIFRhcmdldCA6ICIpDQoJCXRyeToNCgkJCWpvayA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIj9hY2Nlc3NfdG9rZW49Iit0b2tldCkNCgkJCW9wID0ganNvbi5sb2Fkcyhqb2sudGV4dCkNCgkJCXByaW50KChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gTmFtZTogIitvcFsibmFtZSJdKSkNCgkJZXhjZXB0IEtleUVycm9yOg0KCQkJcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBJRCBOb3QgRm91bmQiKSkNCgkJCXByaW50KChwKyJcbiBbQkFDS10iK3ApKQ0KCQkJbWVudSgpDQoJCXI9cmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiL3N1YnNjcmliZXJzP2xpbWl0PTIwMDAwJmFjY2Vzc190b2tlbj0iK3Rva2V0KQ0KCQlpZCA9IFtdDQoJCXo9anNvbi5sb2FkcyhyLnRleHQpDQoJCXFxID0gKG9wWyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQ0KCQl5cyA9IG9wZW4ocXEgLCAidyIpIy5yZXBsYWNlKCIgIiwiXyIpDQoJCWZvciBhIGluIHpbImRhdGEiXToNCgkJCWlkLmFwcGVuZChhWyJpZCJdKyI8PT4iK2FbIm5hbWUiXSkNCgkJCXlzLndyaXRlKGFbImlkIl0rIjw9PiIrYVsibmFtZSJdKyJcbiIpDQoJCXlzLmNsb3NlKCkNCgkJcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBUb3RhbCBJRCA6ICVzIiUobGVuKGlkKSkpKQ0KCQlyZXR1cm4gcGlsaWhjcmFjayhxcSkNCglleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQoJCWV4aXQocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gRXJyb3IgOiAlcyIlZSkNCg0KIyMjIEtyZWsgTm9tZXIgc3UhICMjIw0KZGVmIHJhbmRvbV9udW1iZXJzKCk6DQogIGRhdGEgPSBbXQ0KICBwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gTnVtYmVyIE11c3QgQmUgNSBEaWdpdCIpKQ0KICBrb2RlPXN0cihpbnB1dChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gRXhhbXBsZSA6IDkyMDM3XG4iK3ArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBJbnB1dCBOdW1iZXI6ICIpKQ0KICBleGl0KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBOdW1iZXIgTXVzdCBCZSA1IERpZ2l0IikpIGlmIGxlbihrb2RlKSA8IDUgZWxzZSAnJw0KICBleGl0KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBOdW1iZXIgTXVzdCBCZSA1IERpZ2l0IikpIGlmIGxlbihrb2RlKSA+IDUgZWxzZSAnJw0KICBqbWw9aW50KGlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBbW91bnQgOiAiKSkNCiAgW2RhdGEuYXBwZW5kKHsndXNlcic6IHN0cihlKSwgJ3B3Jzpbc3RyKGVbNTpdKSwgc3RyKGVbNjpdKV19KSBmb3IgZSBpbiBbc3RyKGtvZGUpKycnLmpvaW4oWyclcyclKHJhbmRpbnQoMCw5KSkgZm9yIGkgaW4gcmFuZ2UoMCw3KV0pIGZvciBlIGluIHJhbmdlKGptbCldXQ0KICBwcmludChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gQ3JhY2sgU3RhcnRlZCwgUGxlYXNlIFdhaXQuLi5cbiIpDQogIHdpdGggY29uY3VycmVudC5mdXR1cmVzLlRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0xNSkgYXMgdGg6DQogICAge3RoLnN1Ym1pdChicnV0ZSwgdXNlclsndXNlciddLCB1c2VyWydwdyddKTogdXNlciBmb3IgdXNlciBpbiBkYXRhfQ0KICBpbnB1dChwKyJcbiBbQkFDS10iK3ApDQogIG1lbnUoKQ0KDQpkZWYgcmFuZG9tX2VtYWlsKCk6DQogIGRhdGEgPSBbXQ0KICBuYW1hPWlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBUYXJnZXQgTmFtZSA6ICIpDQogIGRvbWFpbj1pbnB1dChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gQ2hvb3NlIERvbWFpbiBbR11tYWlsLCBbWV1haG9vLCBbSF1vdG1haWwgOiAiKS5sb3dlcigpLnN0cmlwKCkNCiAgbGlzdD17DQogICAgJ2cnOidAZ21haWwuY29tJywNCiAgICAneSc6J0B5YWhvby5jb20nLA0KICAgICdoJzonQGhvdG1haWwuY29tJw0KICB9DQogIGV4aXQoKCJcMDMzWzA7MzdtIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEZpbGwgSW4gVGhlIENvcnJlY3QiKSkgaWYgbm90IGRvbWFpbiBpbiBbJ2cnLCd5JywnaCddIGVsc2UgJycNCiAgam1sPWludChpbnB1dChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gQW1vdW50IDogIikpDQogIHNldHB3PWlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBTZXQgUGFzc3dvcmQgOiAiKS5zcGxpdCgnLCcpDQogIHByaW50KCJcMDMzWzA7MzdtIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIENyYWNrIFN0YXJ0ZWQsIFBsZWFzZSBXYWl0Li4uXG4iKQ0KICBbZGF0YS5hcHBlbmQoeyd1c2VyJzogbmFtYStzdHIoZSkrbGlzdFtkb21haW5dLCAncHcnOlsoaSkgZm9yIGkgaW4gc2V0cHddfSkgZm9yIGUgaW4gcmFuZ2UoMSxqbWwrMSldDQogIHdpdGggY29uY3VycmVudC5mdXR1cmVzLlRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0xNSkgYXMgdGg6DQogICAge3RoLnN1Ym1pdChicnV0ZSwgdXNlclsndXNlciddLCB1c2VyWydwdyddKTogdXNlciBmb3IgdXNlciBpbiBkYXRhfQ0KICBpbnB1dCgiXG5cMDMzWzA7MzdtIFtCQUNLXSIpDQogIG1lbnUoKQ0KDQpkZWYgYnJ1dGUodXNlciwgcGFzc3MpOg0KICB0cnk6DQogICAgZm9yIHB3IGluIHBhc3NzOg0KICAgICAgcGFyYW1zPXsNCiAgICAgICAgJ2FjY2Vzc190b2tlbic6ICczNTA2ODU1MzE3MjglN0M2MmY4Y2U5Zjc0YjEyZjg0YzEyM2NjMjM0MzdhNGEzMicsDQogICAgICAgICdmb3JtYXQnOiAnSlNPTicsDQogICAgICAgICdzZGtfdmVyc2lvbic6ICcyJywNCiAgICAgICAgJ2VtYWlsJzogdXNlciwNCiAgICAgICAgJ2xvY2FsZSc6ICdlbl9VUycsDQogICAgICAgICdwYXNzd29yZCc6IHB3LA0KICAgICAgICAnc2RrJzogJ2lvcycsDQogICAgICAgICdnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMnOiAnMScsDQogICAgICAgICdzaWcnOiAnM2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYnLA0KICAgICAgfQ0KICAgICAgYXBpPSdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbicNCiAgICAgIHJlc3BvbnNlPXJlcXVlc3RzLmdldChhcGksIHBhcmFtcz1wYXJhbXMpDQogICAgICBpZiByZS5zZWFyY2goJyhFQUFBKVx3KycsIHN0cihyZXNwb25zZS50ZXh0KSk6DQogICAgICAgIHByaW50KCdceDFiWzA7MzJtICogLS0+ICVzIOKAoiAlcyAnJShzdHIodXNlciksIHN0cihwdykpKQ0KICAgICAgICBicmVhaw0KICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcmVzcG9uc2UuanNvbigpWydlcnJvcl9tc2cnXToNCiAgICAgICAgcHJpbnQoJ1x4MWJbMDszM20gKiAtLT4gJXMg4oCiICVzICclKHN0cih1c2VyKSwgc3RyKHB3KSkpDQogICAgICAgIGJyZWFrDQogIGV4Y2VwdDogcGFzcw0KDQoNCmRlZiBzZXR0aW5nX3VhKCk6DQoJcHJpbnQoIlxuIFsgcGlsaWggdXNlci1hZ2VudCBocCBhbmRhIF1cbiIpDQoJcHJpbnQoIiBbMV0gWGlhb21pIikNCglwcmludCgiIFsyXSBTYW1zdW5nIikNCglwcmludCgiIFszXSBOb2tpYSIpDQoJcHJpbnQoIiBbNF0gQXN1cyIpDQoJcHJpbnQoIiBbNV0gSHVhd2VpIikNCglwcmludCgiIFs2XSBVc2VyLUFnZW50IE1hbnVhbCIpDQoJdWEgPSBpbnB1dCgiXG4gWz9dIGNob29zZSA6ICIpDQoJaWYgdWEgPT0iIjoNCgkJbWVudSgpDQoJZWxpZiB1YSA9PSAiMSI6DQoJCWNfdWEgPSAoIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgTWkgOVQgUHJvIEJ1aWxkL1FLUTEuMTkwODI1LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OC4wLjQzMjQuMTgxIE1vYmlsZSBTYWZhcmkvNTM3LjM2W0ZCQU4vRU1BO0ZCTEMvaXRfSVQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdIikNCgkJb3BlbigiLnVhIiwgInciKS53cml0ZShjX3VhKQ0KCQl0aW1lLnNsZWVwKDEpDQoJCWlucHV0KCJcbiBbK10gYmVyaGFzaWwgZ2FudGkgdXNlciBhZ2VudCIpDQoJCW1lbnUoKQ0KCWVsaWYgdWEgPT0gIjIiOg0KCQljX3VhID0gKCJEYWx2aWsvMi4xLjAgKExpbnV4OyBVOyBBbmRyb2lkIDguMC4wOyBTTS1BNzIwRiBCdWlsZC9SMTZOVykgW0ZCQU4vT3JjYS1BbmRyb2lkO0ZCQVYvMTk2LjAuMC4yOS45OTtGQlBOL2NvbS5mYWNlYm9vay5vcmNhO0ZCTEMvaWRfSUQ7RkJCVi8xMzUzNzQ0Nzk7RkJDUi9BSVM7RkJNRi9zYW1zdW5nO0ZCQkQvc2Ftc3VuZztGQkRWL1NNLUE3MjBGO0ZCU1Y4LjAuMDtGQkNBL2FybWVhYmktdjdhOmFybWVhYmk7RkJETS97ZGVuc2l0eT0zLjAsd2lkdGg9MTA4MCxoZWlnaHQ9MTkyMH07RkJfRlcvMTtdIikNCgkJb3BlbigiLnVhIiwgInciKS53cml0ZShjX3VhKQ0KCQl0aW1lLnNsZWVwKDEpDQoJCWlucHV0KCJcbiBbK10gYmVyaGFzaWwgZ2FudGkgdXNlciBhZ2VudCIpDQoJCW1lbnUoKQ0KCWVsaWYgdWEgPT0gIjMiOg0KCQljX3VhID0gKCJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNC4xLjI7IE5va2lhX1ggQnVpbGQvSlpPNTRLKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMzAuMC4xNTk5LjgyIE1vYmlsZSBTYWZhcmkvNTM3LjM2W0ZCQU4vRU1BO0ZCTEMvaXRfSVQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdIikNCgkJb3BlbigiLnVhIiwgInciKS53cml0ZShjX3VhKQ0KCQl0aW1lLnNsZWVwKDEpDQoJCWlucHV0KCJcbiBbK10gYmVyaGFzaWwgZ2FudGkgdXNlciBhZ2VudCIpDQoJCW1lbnUoKQ0KCWVsaWYgdWEgPT0gIjQiOg0KCQljX3VhID0gKCJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNS4wOyBBU1VTX1owMEFEIEJ1aWxkL0xSWDIxVikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzM3LjAuMC4wIE1vYmlsZSBTYWZhcmkvNTM3LjM2IFtGQkFOL0VNQTtGQkxDL2lkX0lEO0ZCQVYvMjM5LjAuMC4xMC4xMDk7XSIpDQoJCW9wZW4oIi51YSIsICJ3Iikud3JpdGUoY191YSkNCgkJdGltZS5zbGVlcCgxKQ0KCQlpbnB1dCgiXG4gWytdIGJlcmhhc2lsIGdhbnRpIHVzZXIgYWdlbnQiKQ0KCQltZW51KCkNCgllbGlmIHVhID09ICI1IjoNCgkJY191YSA9ICgiW0ZCQU4vRkI0QSxGQkFWLzIyMi4wLjAuNDguMTEzO0ZCQlYvMTU1MzIzMzY2O0ZCRE0ve2RlbnNpdHk9Mi4wLHdpZHRoPTcyMCxoZWlnaHQ9MTM2MH07RkJMQy9zcl9SUztGQlJWLzE1NjYyNTY5NjtGQkNSL210OnM7RkJNRi9IVUFXRUk7RkJCRC9IVUFXRUksLkZCUE4vY29tLmZhY2Vib29rLmthdGFuYTtGQkRWL0xETi1MMjE7RkJTVi84LjAuMDtGQk9QLzE5LkZCQ0EvYXJtZWFiaS12N2E6YXJtZWFiaSxdIikNCgkJb3BlbigiLnVhIiwgInciKS53cml0ZShjX3VhKQ0KCQl0aW1lLnNsZWVwKDEpDQoJCWlucHV0KCJcbiBbK10gYmVyaGFzaWwgZ2FudGkgdXNlciBhZ2VudCIpDQoJCW1lbnUoKQ0KCWVsaWYgdWEgPT0gIjYiOg0KCQljX3VhID0gaW5wdXQoIiBbK10gdXNlci1hZ2VudCA6ICIpDQoJCWlmIGNfdWEgPT0gIiI6DQoJCQlleGl0KCJcbiBbIV0gamFuZ2FuIGtvc29uZyIpDQoJCW9wZW4oIi51YSIsICJ3Iikud3JpdGUoY191YSkNCgkJdGltZS5zbGVlcCgxKQ0KCQlpbnB1dCgiXG4gWytdIGJlcmhhc2lsIGdhbnRpIHVzZXIgYWdlbnQiKQ0KCQltZW51KCkNCgllbHNlOg0KCQltZW51KCkNCg0KIyMjIFBBU1NXT1JEICMjIw0KDQpkZWYgZ2VuZXJhdGUodGV4dCk6DQoJcmVzdWx0cz1bXQ0KCWdsb2JhbCBpcHMNCglmb3IgaSBpbiB0ZXh0LnNwbGl0KCIgIik6DQoJCWlmIGxlbihpKTwzOg0KCQkJY29udGludWUNCgkJZWxzZToNCgkJCWk9aS5sb3dlcigpDQoJCQlpZiBsZW4oaSk9PTMgb3IgbGVuKGkpPT00IG9yIGxlbihpKT09NToNCgkJCQlyZXN1bHRzLmFwcGVuZChpKyIxMjMiKQ0KCQkJCXJlc3VsdHMuYXBwZW5kKGkrIjEyMzQiKQ0KCQkJCXJlc3VsdHMuYXBwZW5kKGkrIjEyMzQ1IikNCgkJCQlyZXN1bHRzLmFwcGVuZChpKQ0KCQkJZWxzZToNCgkJCQlyZXN1bHRzLmFwcGVuZChpKyIxMjMiKQ0KCQkJCXJlc3VsdHMuYXBwZW5kKGkrIjEyMzQiKQ0KCQkJCXJlc3VsdHMuYXBwZW5kKGkrIjEyMzQ1IikNCgkJCQlyZXN1bHRzLmFwcGVuZChpKQ0KCQkJCWlmICJpbmRvbmVzaWEiIGluIGlwczoNCgkJCQkJcmVzdWx0cy5hcHBlbmQoInNheWFuZyIpDQoJCQkJCXJlc3VsdHMuYXBwZW5kKCJhbmppbmciKQ0KCXJldHVybiByZXN1bHRzDQoNCiMjIyBNT0RVTEUgQ1JBQ0sgIyMjDQoNCmRlZiBtYmFzaWMoZW0scGFzLGhvc3RzKToNCglyPXJlcXVlc3RzLlNlc3Npb24oKQ0KCXIuaGVhZGVycy51cGRhdGUoeyJIb3N0IjoibWJhc2ljLmZhY2Vib29rLmNvbSIsImNhY2hlLWNvbnRyb2wiOiJtYXgtYWdlPTAiLCJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjoiMSIsInVzZXItYWdlbnQiOiJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTA7IE1pIDlUIFBybyBCdWlsZC9RS1ExLjE5MDgyNS4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvODguMC40MzI0LjE4MSBNb2JpbGUgU2FmYXJpLzUzNy4zNltGQkFOL0VNQTtGQkxDL2l0X0lUO0ZCQVYvMjM5LjAuMC4xMC4xMDk7XSIsImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLCJhY2NlcHQtZW5jb2RpbmciOiJnemlwLCBkZWZsYXRlIiwiYWNjZXB0LWxhbmd1YWdlIjoiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcifSkNCglwPXIuZ2V0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vIikNCgliPWJzNC5CZWF1dGlmdWxTb3VwKHAudGV4dCwiaHRtbC5wYXJzZXIiKQ0KCW1ldGE9IiIuam9pbihiczQucmUuZmluZGFsbCgnZHRzZyI6XHsidG9rZW4iOiIoLio/KSInLHAudGV4dCkpDQoJZGF0YT17fQ0KCWZvciBpIGluIGIoImlucHV0Iik6DQoJCWlmIGkuZ2V0KCJ2YWx1ZSIpIGlzIE5vbmU6DQoJCQlpZiBpLmdldCgibmFtZSIpPT0iZW1haWwiOg0KCQkJCWRhdGEudXBkYXRlKHsiZW1haWwiOmVtfSkNCgkJCWVsaWYgaS5nZXQoIm5hbWUiKT09InBhc3MiOg0KCQkJCWRhdGEudXBkYXRlKHsicGFzcyI6cGFzfSkNCgkJCWVsc2U6DQoJCQkJZGF0YS51cGRhdGUoe2kuZ2V0KCJuYW1lIik6IiJ9KQ0KCQllbHNlOg0KCQkJZGF0YS51cGRhdGUoe2kuZ2V0KCJuYW1lIik6aS5nZXQoInZhbHVlIil9KQ0KCWRhdGEudXBkYXRlKA0KCQl7ImZiX2R0c2ciOm1ldGEsIm1fc2VzcyI6IiIsIl9fdXNlciI6IjAiLA0KCQkiX19yZXEiOiJkIiwiX19jc3IiOiIiLCJfX2EiOiIiLCJfX2R5biI6IiIsImVuY3Bhc3MiOiIiDQoJCX0NCgkpDQoJci5oZWFkZXJzLnVwZGF0ZSh7InJlZmVyZXIiOiJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04In0pDQoJcG89ci5wb3N0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL2xvZ2luL2FzeW5jLz9yZWZzcmM9aHR0cHMlM0ElMkYlMkZtLmZhY2Vib29rLmNvbSUyRmxvZ2luJTJGJTNGcmVmJTNEZGJsJmx3dj0xMDAiLGRhdGE9ZGF0YSkudGV4dA0KCWlmICJjX3VzZXIiIGluIGxpc3Qoci5jb29raWVzLmdldF9kaWN0KCkua2V5cygpKToNCgkJcmV0dXJuIHsic3RhdHVzIjoic3VjY2VzcyIsImVtYWlsIjplbSwicGFzcyI6cGFzLCJjb29raWVzIjpyLmNvb2tpZXMuZ2V0X2RpY3QoKX0NCgllbGlmICJjaGVja3BvaW50IiBpbiBsaXN0KHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKSk6DQoJCXJldHVybiB7InN0YXR1cyI6ImNwIiwiZW1haWwiOmVtLCJwYXNzIjpwYXMsImNvb2tpZXMiOnIuY29va2llcy5nZXRfZGljdCgpfQ0KCWVsc2U6cmV0dXJuIHsic3RhdHVzIjoiZXJyb3IiLCJlbWFpbCI6ZW0sInBhc3MiOnBhc30NCg0KZGVmIGZfZmIoZW0scGFzLGhvc3RzKToNCglnbG9iYWwgdWENCglyPXJlcXVlc3RzLlNlc3Npb24oKQ0KCXIuaGVhZGVycy51cGRhdGUoeyJIb3N0IjoiZnJlZS5mYWNlYm9vay5jb20iLCJjYWNoZS1jb250cm9sIjoibWF4LWFnZT0wIiwidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6IjEiLCJ1c2VyLWFnZW50IjoiRGFsdmlrLzEuNi4wIChMaW51eDsgVTsgQW5kcm9pZCA0LjQuMjsgTlg1NSBCdWlsZC9LT1Q1NTA2KSBbRkJBTi9GQjRBO0ZCQVYvMTA2LjAuMC4yNi42ODtGQkJWLzQ1OTA0MTYwO0ZCRE0ve2RlbnNpdHk9My4wLHdpZHRoPTEwODAsaGVpZ2h0PTE5MjB9O0ZCTEMvaXRfSVQ7RkJSVi80NTkwNDE2MDtGQkNSL1Bvc3RlTW9iaWxlO0ZCTUYvYXN1cztGQkJEL2FzdXM7RkJQTi9jb20uZmFjZWJvb2sua2F0YW5hO0ZCRFYvQVNVU19aMDBBRDtGQlNWLzUuMDtGQk9QLzE7RkJDQS94ODY6YXJtZWFiaS12N2E7XSIsImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLCJhY2NlcHQtZW5jb2RpbmciOiJnemlwLCBkZWZsYXRlIiwiYWNjZXB0LWxhbmd1YWdlIjoiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcifSkNCglwPXIuZ2V0KCJodHRwczovL2ZyZWUuZmFjZWJvb2suY29tLyIpDQoJYj1iczQuQmVhdXRpZnVsU291cChwLnRleHQsImh0bWwucGFyc2VyIikNCgltZXRhPSIiLmpvaW4oYnM0LnJlLmZpbmRhbGwoJ2R0c2ciOlx7InRva2VuIjoiKC4qPykiJyxwLnRleHQpKQ0KCWRhdGE9e30NCglmb3IgaSBpbiBiKCJpbnB1dCIpOg0KCQlpZiBpLmdldCgidmFsdWUiKSBpcyBOb25lOg0KCQkJaWYgaS5nZXQoIm5hbWUiKT09ImVtYWlsIjoNCgkJCQlkYXRhLnVwZGF0ZSh7ImVtYWlsIjplbX0pDQoJCQllbGlmIGkuZ2V0KCJuYW1lIik9PSJwYXNzIjoNCgkJCQlkYXRhLnVwZGF0ZSh7InBhc3MiOnBhc30pDQoJCQllbHNlOg0KCQkJCWRhdGEudXBkYXRlKHtpLmdldCgibmFtZSIpOiIifSkNCgkJZWxzZToNCgkJCWRhdGEudXBkYXRlKHtpLmdldCgibmFtZSIpOmkuZ2V0KCJ2YWx1ZSIpfSkNCglkYXRhLnVwZGF0ZSgNCgkJeyJmYl9kdHNnIjptZXRhLCJtX3Nlc3MiOiIiLCJfX3VzZXIiOiIwIiwNCgkJIl9fcmVxIjoiZCIsIl9fY3NyIjoiIiwiX19hIjoiIiwiX19keW4iOiIiLCJlbmNwYXNzIjoiIg0KCQl9DQoJKQ0KCXIuaGVhZGVycy51cGRhdGUoeyJyZWZlcmVyIjoiaHR0cHM6Ly9mcmVlLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgifSkNCglwbz1yLnBvc3QoImh0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL2xvZ2luL2FzeW5jLz9yZWZzcmM9aHR0cHMlM0ElMkYlMkZtLmZhY2Vib29rLmNvbSUyRmxvZ2luJTJGJTNGcmVmJTNEZGJsJmx3dj0xMDAiLGRhdGE9ZGF0YSkudGV4dA0KCWlmICJjX3VzZXIiIGluIGxpc3Qoci5jb29raWVzLmdldF9kaWN0KCkua2V5cygpKToNCgkJcmV0dXJuIHsic3RhdHVzIjoic3VjY2VzcyIsImVtYWlsIjplbSwicGFzcyI6cGFzLCJjb29raWVzIjpyLmNvb2tpZXMuZ2V0X2RpY3QoKX0NCgllbGlmICJjaGVja3BvaW50IiBpbiBsaXN0KHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKSk6DQoJCXJldHVybiB7InN0YXR1cyI6ImNwIiwiZW1haWwiOmVtLCJwYXNzIjpwYXMsImNvb2tpZXMiOnIuY29va2llcy5nZXRfZGljdCgpfQ0KCWVsc2U6cmV0dXJuIHsic3RhdHVzIjoiZXJyb3IiLCJlbWFpbCI6ZW0sInBhc3MiOnBhc30NCmRlZiB0b3VjaF9mYihlbSxwYXMsaG9zdHMpOg0KCWdsb2JhbCB1YSx0b3VjaF9mYmgNCglyPXJlcXVlc3RzLlNlc3Npb24oKQ0KCXIuaGVhZGVycy51cGRhdGUoeyJIb3N0IjoidG91Y2guZmFjZWJvb2suY29tIiwiY2FjaGUtY29udHJvbCI6Im1heC1hZ2U9MCIsInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiIxIiwidXNlci1hZ2VudCI6Ik1vemlsbGEvNS4wIChYMTE7IExpbnV4IHg4Nl82NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgS2l3aSBDaHJvbWUvNjguMC4zNDM4LjAgU2FmYXJpLzUzNy4zNiIsImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLCJhY2NlcHQtZW5jb2RpbmciOiJnemlwLCBkZWZsYXRlLCBiciIsImFjY2VwdC1sYW5ndWFnZSI6ImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43In0pDQoJcD1yLmdldCgiaHR0cHM6Ly90b3VjaC5mYWNlYm9vay5jb20vIikNCgliPWJzNC5CZWF1dGlmdWxTb3VwKHAudGV4dCwiaHRtbC5wYXJzZXIiKQ0KCW1ldGE9IiIuam9pbihiczQucmUuZmluZGFsbCgnZHRzZyI6XHsidG9rZW4iOiIoLio/KSInLHAudGV4dCkpDQoJZGF0YT17fQ0KCWZvciBpIGluIGIoImlucHV0Iik6DQoJCWlmIGkuZ2V0KCJ2YWx1ZSIpIGlzIE5vbmU6DQoJCQlpZiBpLmdldCgibmFtZSIpPT0iZW1haWwiOg0KCQkJCWRhdGEudXBkYXRlKHsiZW1haWwiOmVtfSkNCgkJCWVsaWYgaS5nZXQoIm5hbWUiKT09InBhc3MiOg0KCQkJCWRhdGEudXBkYXRlKHsicGFzcyI6cGFzfSkNCgkJCWVsc2U6DQoJCQkJZGF0YS51cGRhdGUoe2kuZ2V0KCJuYW1lIik6IiJ9KQ0KCQllbHNlOg0KCQkJZGF0YS51cGRhdGUoe2kuZ2V0KCJuYW1lIik6aS5nZXQoInZhbHVlIil9KQ0KCWRhdGEudXBkYXRlKA0KCQl7ImZiX2R0c2ciOm1ldGEsIm1fc2VzcyI6IiIsIl9fdXNlciI6IjAiLA0KCQkiX19yZXEiOiJkIiwiX19jc3IiOiIiLCJfX2EiOiIiLCJfX2R5biI6IiIsImVuY3Bhc3MiOiIiDQoJCX0NCgkpDQoJci5oZWFkZXJzLnVwZGF0ZSh7InJlZmVyZXIiOiJodHRwczovL3RvdWNoLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgifSkNCglwbz1yLnBvc3QoImh0dHBzOi8vdG91Y2guZmFjZWJvb2suY29tL2xvZ2luL2RldmljZS1iYXNlZC9sb2dpbi9hc3luYy8/cmVmc3JjPWh0dHBzJTNBJTJGJTJGbS5mYWNlYm9vay5jb20lMkZsb2dpbiUyRiUzRnJlZiUzRGRibCZsd3Y9MTAwIixkYXRhPWRhdGEpLnRleHQNCglpZiAiY191c2VyIiBpbiByLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6DQoJCXJldHVybiB7InN0YXR1cyI6InN1Y2Nlc3MiLCJlbWFpbCI6ZW0sInBhc3MiOnBhcywiY29va2llcyI6ci5jb29raWVzLmdldF9kaWN0KCl9DQoJZWxpZiAiY2hlY2twb2ludCIgaW4gci5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOg0KCQlyZXR1cm4geyJzdGF0dXMiOiJjcCIsImVtYWlsIjplbSwicGFzcyI6cGFzLCJjb29raWVzIjpyLmNvb2tpZXMuZ2V0X2RpY3QoKX0NCgllbHNlOnJldHVybiB7InN0YXR1cyI6ImVycm9yIiwiZW1haWwiOmVtLCJwYXNzIjpwYXN9I3RvdWNoIGZiDQoNCmRlZiBtX2ZiKGVtLCBwYXMsIGhvc3RzKToNCiAgICByID0gcmVxdWVzdHMuU2Vzc2lvbigpDQogICAgci5oZWFkZXJzLnVwZGF0ZSh7Ikhvc3QiOiJtLmZhY2Vib29rLmNvbSIsImNhY2hlLWNvbnRyb2wiOiJtYXgtYWdlPTAiLCJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjoiMSIsInVzZXItYWdlbnQiOiJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOC4xLjA7IENQSDE5MDkpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS84OC4wLjQzMjQuOTMgTW9iaWxlIFNhZmFyaS81MzcuMzZbRkJBTi9FTUE7RkJMQy9pdF9JVDtGQkFWLzI0MC4wLjAuOS4xMTU7XSIsImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLCJhY2NlcHQtZW5jb2RpbmciOiJnemlwLCBkZWZsYXRlIiwiYWNjZXB0LWxhbmd1YWdlIjoiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcifSkNCiAgICBwID0gci5nZXQoJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20vJykNCiAgICBiID0gYnM0LkJlYXV0aWZ1bFNvdXAocC50ZXh0LCAnaHRtbC5wYXJzZXInKQ0KICAgIG1ldGEgPSAoJycpLmpvaW4oYnM0LnJlLmZpbmRhbGwoJ2R0c2ciOlxceyJ0b2tlbiI6IiguKj8pIicsIHAudGV4dCkpDQogICAgZGF0YSA9IHt9DQogICAgZm9yIGkgaW4gYignaW5wdXQnKToNCiAgICAgICAgaWYgaS5nZXQoJ3ZhbHVlJykgaXMgTm9uZToNCiAgICAgICAgICAgIGlmIGkuZ2V0KCduYW1lJykgPT0gJ2VtYWlsJzoNCiAgICAgICAgICAgICAgICBkYXRhLnVwZGF0ZSh7J2VtYWlsJzogZW19KQ0KICAgICAgICAgICAgZWxpZiBpLmdldCgnbmFtZScpID09ICdwYXNzJzoNCiAgICAgICAgICAgICAgICBkYXRhLnVwZGF0ZSh7J3Bhc3MnOiBwYXN9KQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBkYXRhLnVwZGF0ZSh7aS5nZXQoJ25hbWUnKTogJyd9KQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgZGF0YS51cGRhdGUoe2kuZ2V0KCduYW1lJyk6IGkuZ2V0KCd2YWx1ZScpfSkNCg0KICAgIGRhdGEudXBkYXRlKHsnZmJfZHRzZyc6IG1ldGEsICdtX3Nlc3MnOiAnJywgJ19fdXNlcic6ICcwJywgJ19fcmVxJzogJ2QnLCANCiAgICAgICAnX19jc3InOiAnJywgJ19fYSc6ICcnLCAnX19keW4nOiAnJywgJ2VuY3Bhc3MnOiAnJ30pDQogICAgci5oZWFkZXJzLnVwZGF0ZSh7J3JlZmVyZXInOiAnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgnfSkNCiAgICBwbyA9IHIucG9zdCgnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9sb2dpbi9kZXZpY2UtYmFzZWQvbG9naW4vYXN5bmMvP3JlZnNyYz1odHRwcyUzQSUyRiUyRm0uZmFjZWJvb2suY29tJTJGbG9naW4lMkYlM0ZyZWYlM0RkYmwmbHd2PTEwMCcsIGRhdGE9ZGF0YSkudGV4dA0KICAgIGlmICdjX3VzZXInIGluIHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKToNCiAgICAgICAgcmV0dXJuIHsnc3RhdHVzJzogJ3N1Y2Nlc3MnLCAnZW1haWwnOiBlbSwgJ3Bhc3MnOiBwYXMsICdjb29raWVzJzogci5jb29raWVzLmdldF9kaWN0KCl9DQogICAgZWxzZToNCiAgICAgICAgaWYgJ2NoZWNrcG9pbnQnIGluIHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKToNCiAgICAgICAgICAgIHJldHVybiB7J3N0YXR1cyc6ICdjcCcsICdlbWFpbCc6IGVtLCAncGFzcyc6IHBhcywgJ2Nvb2tpZXMnOiByLmNvb2tpZXMuZ2V0X2RpY3QoKX0NCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiB7J3N0YXR1cyc6ICdlcnJvcicsICdlbWFpbCc6IGVtLCAncGFzcyc6IHBhc30NCg0KICAgICAgICByZXR1cm4NCg0KZGVmIHRvdWNoX2ZiKGVtLHBhcyxob3N0cyk6DQoJZ2xvYmFsIHVhLHRvdWNoX2ZiaA0KCXI9cmVxdWVzdHMuU2Vzc2lvbigpDQoJci5oZWFkZXJzLnVwZGF0ZSh7Ikhvc3QiOiJ0b3VjaC5mYWNlYm9vay5jb20iLCJjYWNoZS1jb250cm9sIjoibWF4LWFnZT0wIiwidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6IjEiLCJ1c2VyLWFnZW50IjoiTW96aWxsYS81LjAgKFgxMTsgTGludXggeDg2XzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBLaXdpIENocm9tZS82OC4wLjM0MzguMCBTYWZhcmkvNTM3LjM2IiwiYWNjZXB0IjoidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCIsImFjY2VwdC1lbmNvZGluZyI6Imd6aXAsIGRlZmxhdGUsIGJyIiwiYWNjZXB0LWxhbmd1YWdlIjoiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcifSkNCglwPXIuZ2V0KCJodHRwczovL3RvdWNoLmZhY2Vib29rLmNvbS8iKQ0KCWI9YnM0LkJlYXV0aWZ1bFNvdXAocC50ZXh0LCJodG1sLnBhcnNlciIpDQoJbWV0YT0iIi5qb2luKGJzNC5yZS5maW5kYWxsKCdkdHNnIjpceyJ0b2tlbiI6IiguKj8pIicscC50ZXh0KSkNCglkYXRhPXt9DQoJZm9yIGkgaW4gYigiaW5wdXQiKToNCgkJaWYgaS5nZXQoInZhbHVlIikgaXMgTm9uZToNCgkJCWlmIGkuZ2V0KCJuYW1lIik9PSJlbWFpbCI6DQoJCQkJZGF0YS51cGRhdGUoeyJlbWFpbCI6ZW19KQ0KCQkJZWxpZiBpLmdldCgibmFtZSIpPT0icGFzcyI6DQoJCQkJZGF0YS51cGRhdGUoeyJwYXNzIjpwYXN9KQ0KCQkJZWxzZToNCgkJCQlkYXRhLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKToiIn0pDQoJCWVsc2U6DQoJCQlkYXRhLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKTppLmdldCgidmFsdWUiKX0pDQoJZGF0YS51cGRhdGUoDQoJCXsiZmJfZHRzZyI6bWV0YSwibV9zZXNzIjoiIiwiX191c2VyIjoiMCIsDQoJCSJfX3JlcSI6ImQiLCJfX2NzciI6IiIsIl9fYSI6IiIsIl9fZHluIjoiIiwiZW5jcGFzcyI6IiINCgkJfQ0KCSkNCglyLmhlYWRlcnMudXBkYXRlKHsicmVmZXJlciI6Imh0dHBzOi8vdG91Y2guZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCJ9KQ0KCXBvPXIucG9zdCgiaHR0cHM6Ly90b3VjaC5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL2xvZ2luL2FzeW5jLz9yZWZzcmM9aHR0cHMlM0ElMkYlMkZtLmZhY2Vib29rLmNvbSUyRmxvZ2luJTJGJTNGcmVmJTNEZGJsJmx3dj0xMDAiLGRhdGE9ZGF0YSkudGV4dA0KCWlmICJjX3VzZXIiIGluIHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKToNCgkJcmV0dXJuIHsic3RhdHVzIjoic3VjY2VzcyIsImVtYWlsIjplbSwicGFzcyI6cGFzLCJjb29raWVzIjpyLmNvb2tpZXMuZ2V0X2RpY3QoKX0NCgllbGlmICJjaGVja3BvaW50IiBpbiByLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6DQoJCXJldHVybiB7InN0YXR1cyI6ImNwIiwiZW1haWwiOmVtLCJwYXNzIjpwYXMsImNvb2tpZXMiOnIuY29va2llcy5nZXRfZGljdCgpfQ0KCWVsc2U6cmV0dXJuIHsic3RhdHVzIjoiZXJyb3IiLCJlbWFpbCI6ZW0sInBhc3MiOnBhc30jdG91Y2ggZmINCg0KDQojIyMgQlJVVEUgQ1JBQ0sgIyMjDQoJDQpjbGFzcyBjcmFjazoNCglvcy5zeXN0ZW0oImNsZWFyIikNCgliYW5uZXIoKQ0KCWRlZiBfX2luaXRfXyhzZWxmLGlzaWZpbGUpOg0KCQlzZWxmLmFkYT1bXQ0KCQlzZWxmLmNwPVtdDQoJCXNlbGYua289MA0KCQlwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQ3JhY2sgV2l0aCBQYXNzIERlZmF1bHQvTWFudWFsIFtkL21dIikpDQoJCXdoaWxlIFRydWU6DQoJCQlmPWlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDaG9vc2UgOiAiKQ0KCQkJaWYgZj09IiI6Y29udGludWUNCgkJCWVsaWYgZj09Im0iOg0KCQkJCXRyeToNCgkJCQkJd2hpbGUgVHJ1ZToNCgkJCQkJCXRyeToNCgkJCQkJCQlzZWxmLmFwaz1pc2lmaWxlDQoJCQkJCQkJc2VsZi5mcz1vcGVuKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpDQoJCQkJCQkJYnJlYWsNCgkJCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCgkJCQkJCQlwcmludCgoIiAgICVzIiVlKSkNCgkJCQkJCQljb250aW51ZQ0KCQkJCQlzZWxmLmZsPVtdDQoJCQkJCWZvciBpIGluIHNlbGYuZnM6DQoJCQkJCQl0cnk6DQoJCQkJCQkJc2VsZi5mbC5hcHBlbmQoeyJpZCI6aS5zcGxpdCgiPD0+IilbMF19KQ0KCQkJCQkJZXhjZXB0OmNvbnRpbnVlDQoJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KCQkJCQlwcmludCgoIiAgICVzIiVlKSkNCgkJCQkJY29udGludWUNCgkJCQlwcmludCgocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEV4YW1wbGUgOiBzYXlhbmcsa29udG9sLDEyMzQ1NiIpKQ0KCQkJCXNlbGYucHdsaXN0KCkNCgkJCQlicmVhaw0KCQkJZWxpZiBmPT0iZCI6DQoJCQkJdHJ5Og0KCQkJCQl3aGlsZSBUcnVlOg0KCQkJCQkJdHJ5Og0KCQkJCQkJCXNlbGYuYXBrPWlzaWZpbGUNCgkJCQkJCQlzZWxmLmZzPW9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkNCgkJCQkJCQlicmVhaw0KCQkJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KCQkJCQkJCXByaW50KCgiICAgJXMiJWUpKQ0KCQkJCQkJCWNvbnRpbnVlDQoJCQkJCXNlbGYuZmw9W10NCgkJCQkJZm9yIGkgaW4gc2VsZi5mczoNCgkJCQkJCXRyeToNCgkJCQkJCQlzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCI8PT4iKVswXSwicHciOmdlbmVyYXRlKGkuc3BsaXQoIjw9PiIpWzFdKX0pDQoJCQkJCQlleGNlcHQ6Y29udGludWUNCgkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQoJCQkJCXByaW50KCgiICAgJXMiJWUpKQ0KCQkJCXByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDcmFjayBTdGFydGVkLi4uIitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW0NQXSBTYXZlZCB0byA6IGNwLnR4dCIpKQ0KCQkJCVRocmVhZFBvb2woMzUpLm1hcChzZWxmLm1haW4sc2VsZi5mbCkNCgkJCQlvcy5yZW1vdmUoc2VsZi5hcGspDQoJCQkJZXhpdCgpDQoJCQkJYnJlYWsNCglkZWYgcHdsaXN0KHNlbGYpOg0KCQlzZWxmLnB3PWlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBQYXNzd29yZCBMaXN0IDogIikuc3BsaXQoIiwiKQ0KCQlpZiBsZW4oc2VsZi5wdykgPT0wOg0KCQkJc2VsZi5wd2xpc3QoKQ0KCQllbHNlOg0KCQkJZm9yIGkgaW4gc2VsZi5mbDoNCgkJCQlpLnVwZGF0ZSh7InB3IjpzZWxmLnB3fSkNCgkJCXByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDcmFjayBTdGFydGVkLi4uIitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW0NQXSBTYXZlZCB0byA6IGNwLnR4dCIpKQ0KCQkJVGhyZWFkUG9vbCgzMCkubWFwKHNlbGYubWFpbixzZWxmLmZsKQ0KCQkJb3MucmVtb3ZlKHNlbGYuYXBrKQ0KCQkJZXhpdCgpDQoJZGVmIG1haW4oc2VsZixmbCk6DQoJCXRyeToNCgkJCWZvciBpIGluIGZsLmdldCgicHciKToNCgkJCQlsb2c9bWJhc2ljKGZsLmdldCgiaWQiKSwNCgkJCQkJaSwiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIikNCgkJCQlpZiBsb2cuZ2V0KCJzdGF0dXMiKT09ImNwIjoNCgkJCQkJcHJpbnQoKCJcclx4MWJbMDszM20gKiAtLT4gJXMg4oCiICVzXG4gKiAtLT4gaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tLyVzXG4gICAgICAgICAgICAgICAiJShmbC5nZXQoImlkIiksaSxmbC5nZXQoImlkIikpKSkNCgkJCQkJc2VsZi5jcC5hcHBlbmQoIiVzIOKAoiAlcyIlKGZsLmdldCgiaWQiKSxpKSkNCgkJCQkJb3BlbigiY3AudHh0IiwiYSsiKS53cml0ZSgNCgkJCQkJCSIlc3wlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KCQkJCQlicmVhaw0KCQkJCWVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJzdWNjZXNzIjoNCgkJCQkJcHJpbnQoKCJcclx4MWJbMDszMm0gKiAtLT4gJXMg4oCiICVzICAgICAgICAgICAgICAgIiUoZmwuZ2V0KCJpZCIpLGkpKSkNCgkJCQkJc2VsZi5hZGEuYXBwZW5kKCIlcyDigKIgJXMiJShmbC5nZXQoImlkIiksaSkpDQoJCQkJCW9wZW4oIm9rLnR4dCIsImErIikud3JpdGUoDQoJCQkJCQkiJXMg4oCiICVzXG4iJShmbC5nZXQoImlkIiksaSkpDQoJCQkJCWJyZWFrDQoJCQkJZWxzZTpjb250aW51ZQ0KCQkJCQkNCgkJCXNlbGYua28rPTENCgkJCXByaW50KCJcclx4MWJbMDszN20gW1wwMzNbMDs5Nm1DcmFja1wwMzNbMDs5N21dXHgxYlswOzM3bSAlcy8lcyBceDFiWzA7MzdtT0sgOiAlcyBceDFiWzA7MzdtQ1AgOiAlc1x4MWJbMDszN20iJShzZWxmLmtvLGxlbihzZWxmLmZsKSxsZW4oc2VsZi5hZGEpLGxlbihzZWxmLmNwKSksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQ0KCQlleGNlcHQ6DQoJCQlzZWxmLm1haW4oZmwpDQoNCmNsYXNzIGNyYWNrdHRsOg0KCW9zLnN5c3RlbSgiY2xlYXIiKQ0KCWJhbm5lcigpDQoJZGVmIF9faW5pdF9fKHNlbGYsaXNpZmlsZSk6DQoJCXNlbGYuYWRhPVtdDQoJCXNlbGYuY3A9W10NCgkJc2VsZi5rbz0wDQoJCXByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDcmFjayBXaXRoIFBhc3MgRGVmYXVsdC9NYW51YWwgW2QvbV0iKSkNCgkJd2hpbGUgVHJ1ZToNCgkJCWY9aW5wdXQocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIENob29zZSA6ICIpDQoJCQlpZiBmPT0iIjpjb250aW51ZQ0KCQkJZWxpZiBmPT0ibSI6DQoJCQkJdHJ5Og0KCQkJCQl3aGlsZSBUcnVlOg0KCQkJCQkJdHJ5Og0KCQkJCQkJCXNlbGYuYXBrPWlzaWZpbGUNCgkJCQkJCQlzZWxmLmZzPW9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkNCgkJCQkJCQlicmVhaw0KCQkJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KCQkJCQkJCXByaW50KCgiICAgJXMiJWUpKQ0KCQkJCQkJCWNvbnRpbnVlDQoJCQkJCXNlbGYuZmw9W10NCgkJCQkJZm9yIGkgaW4gc2VsZi5mczoNCgkJCQkJCXRyeToNCgkJCQkJCQlzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCI8PT4iKVswXX0pDQoJCQkJCQlleGNlcHQ6Y29udGludWUNCgkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQoJCQkJCXByaW50KCgiICAgJXMiJWUpKQ0KCQkJCQljb250aW51ZQ0KCQkJCXByaW50KChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gRXhhbXBsZSA6IHNheWFuZyxrb250b2wsMTIzNDU2IikpDQoJCQkJc2VsZi5wd2xpc3QoKQ0KCQkJCWJyZWFrDQoJCQllbGlmIGY9PSJkIjoNCgkJCQl0cnk6DQoJCQkJCXdoaWxlIFRydWU6DQoJCQkJCQl0cnk6DQoJCQkJCQkJc2VsZi5hcGs9aXNpZmlsZQ0KCQkJCQkJCXNlbGYuZnM9b3BlbihzZWxmLmFwaykucmVhZCgpLnNwbGl0bGluZXMoKQ0KCQkJCQkJCWJyZWFrDQoJCQkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQoJCQkJCQkJcHJpbnQoKCIgICAlcyIlZSkpDQoJCQkJCQkJY29udGludWUNCgkJCQkJc2VsZi5mbD1bXQ0KCQkJCQlmb3IgaSBpbiBzZWxmLmZzOg0KCQkJCQkJdHJ5Og0KCQkJCQkJCXNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIjw9PiIpWzBdLCJwdyI6Z2VuZXJhdGUoaS5zcGxpdCgiPD0+IilbMV0pfSkNCgkJCQkJCWV4Y2VwdDpjb250aW51ZQ0KCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCgkJCQkJcHJpbnQoKCIgICAlcyIlZSkpDQoJCQkJcHJpbnQoKHArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIENyYWNrIFN0YXJ0ZWQuLi4iK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW09LXSBTYXZlZCB0byA6IG9rLnR4dCIrcCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQWNjb3VudCBbQ1BdIFNhdmVkIHRvIDogY3AudHh0IikpDQoJCQkJVGhyZWFkUG9vbCgzNSkubWFwKHNlbGYubWFpbixzZWxmLmZsKQ0KCQkJCW9zLnJlbW92ZShzZWxmLmFwaykNCgkJCQlleGl0KCkNCgkJCQlicmVhaw0KCWRlZiBwd2xpc3Qoc2VsZik6DQoJCXNlbGYucHc9aW5wdXQocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIFBhc3N3b3JkIExpc3QgOiAiKS5zcGxpdCgiLCIpDQoJCWlmIGxlbihzZWxmLnB3KSA9PTA6DQoJCQlzZWxmLnB3bGlzdCgpDQoJCWVsc2U6DQoJCQlmb3IgaSBpbiBzZWxmLmZsOg0KCQkJCWkudXBkYXRlKHsicHciOnNlbGYucHd9KQ0KCQkJcHJpbnQoKHArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIENyYWNrIFN0YXJ0ZWQuLi4iK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW09LXSBTYXZlZCB0byA6IG9rLnR4dCIrcCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQWNjb3VudCBbQ1BdIFNhdmVkIHRvIDogY3AudHh0IikpDQoJCQlUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5tYWluLHNlbGYuZmwpDQoJCQlvcy5yZW1vdmUoc2VsZi5hcGspDQoJCQlleGl0KCkNCglkZWYgbWFpbihzZWxmLGZsKToNCgkJdHJ5Og0KCQkJZm9yIGkgaW4gZmwuZ2V0KCJwdyIpOg0KCQkJCWxvZz1tYmFzaWMoZmwuZ2V0KCJpZCIpLA0KCQkJCQlpLCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iKQ0KCQkJCWlmIGxvZy5nZXQoInN0YXR1cyIpPT0iY3AiOg0KCQkJCQl0cnk6DQoJCQkJCQlrZT1yZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIrZmwuZ2V0KCJpZCIpKyI/YWNjZXNzX3Rva2VuPSIrb3BlbigibG9naW4udHh0IiwiciIpLnJlYWQoKSkNCgkJCQkJCXR0PWpzb24ubG9hZHMoa2UudGV4dCkNCgkJCQkJCXR0bD10dFsiYmlydGhkYXkiXQ0KCQkJCQlleGNlcHQ6cGFzcw0KCQkJCQlwcmludCgiXHJceDFiWzA7MzNtICogLS0+ICVzIOKAoiAlcyDigKIgJXMgXHgxYlswbSAgICIlKGZsLmdldCgiaWQiKSxpLHN0cih0dGwpKSkNCgkJCQkJc2VsZi5jcC5hcHBlbmQoIiVzIOKAoiAlcyIlKGZsLmdldCgiaWQiKSxpKSkNCgkJCQkJb3BlbigiY3AudHh0IiwiYSsiKS53cml0ZSgNCgkJCQkJCSIlc3wlc3wlc1xuIiUoZmwuZ2V0KCJpZCIpLGksc3RyKHR0bCkpKQ0KCQkJCQlicmVhaw0KCQkJCWVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJzdWNjZXNzIjoNCgkJCQkJcHJpbnQoKCJcclx4MWJbMDszMm0gKiAtLT4gJXMg4oCiICVzICAgICAgICAgICAgICAgIiUoZmwuZ2V0KCJpZCIpLGkpKSkNCgkJCQkJc2VsZi5hZGEuYXBwZW5kKCIlcyDigKIgJXMiJShmbC5nZXQoImlkIiksaSkpDQoJCQkJCWlmIGZsLmdldCgiaWQiKSBpbiBvcGVuKCJvay50eHQiKS5yZWFkKCk6DQoJCQkJCQlicmVhaw0KCQkJCQllbHNlOg0KCQkJCQkJb3Blbigib2sudHh0IiwiYSsiKS53cml0ZSgNCgkJCQkJCSIlcyDigKIgJXNcbiIlKGZsLmdldCgiaWQiKSxpKSkNCgkJCQkJYnJlYWsNCgkJCQllbHNlOmNvbnRpbnVlDQoJCQkJCQ0KCQkJc2VsZi5rbys9MQ0KCQkJcHJpbnQoIlxyXHgxYlswOzM3bSBbXDAzM1swOzk2bUNyYWNrXDAzM1swOzkwbV1ceDFiWzA7MzdtICVzLyVzIFx4MWJbMDszN21PSyA6ICVzIFx4MWJbMDszN21DUCA6ICVzXHgxYlswOzM3bSIlKHNlbGYua28sbGVuKHNlbGYuZmwpLGxlbihzZWxmLmFkYSksbGVuKHNlbGYuY3ApKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQoJCWV4Y2VwdDoNCgkJCXNlbGYubWFpbihmbCkNCg0KY2xhc3MgY3Jla206DQoJb3Muc3lzdGVtKCJjbGVhciIpDQoJYmFubmVyKCkNCglkZWYgX19pbml0X18oc2VsZixpc2lmaWxlKToNCgkJc2VsZi5hZGE9W10NCgkJc2VsZi5jcD1bXQ0KCQlzZWxmLmtvPTANCgkJcHJpbnQoKHArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIENyYWNrIFdpdGggUGFzcyBEZWZhdWx0L01hbnVhbCBbZC9tXSIpKQ0KCQl3aGlsZSBUcnVlOg0KCQkJZj1pbnB1dChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gQ2hvb3NlIDogIikNCgkJCWlmIGY9PSIiOmNvbnRpbnVlDQoJCQllbGlmIGY9PSJtIjoNCgkJCQl0cnk6DQoJCQkJCXdoaWxlIFRydWU6DQoJCQkJCQl0cnk6DQoJCQkJCQkJc2VsZi5hcGs9aXNpZmlsZQ0KCQkJCQkJCXNlbGYuZnM9b3BlbihzZWxmLmFwaykucmVhZCgpLnNwbGl0bGluZXMoKQ0KCQkJCQkJCWJyZWFrDQoJCQkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQoJCQkJCQkJcHJpbnQoKCIgICAlcyIlZSkpDQoJCQkJCQkJY29udGludWUNCgkJCQkJc2VsZi5mbD1bXQ0KCQkJCQlmb3IgaSBpbiBzZWxmLmZzOg0KCQkJCQkJdHJ5Og0KCQkJCQkJCXNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIjw9PiIpWzBdfSkNCgkJCQkJCWV4Y2VwdDpjb250aW51ZQ0KCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCgkJCQkJcHJpbnQoKCIgICAlcyIlZSkpDQoJCQkJCWNvbnRpbnVlDQoJCQkJcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBFeGFtcGxlIDogc2F5YW5nLGtvbnRvbCwxMjM0NTYiKSkNCgkJCQlzZWxmLnB3bGlzdCgpDQoJCQkJYnJlYWsNCgkJCWVsaWYgZj09ImQiOg0KCQkJCXRyeToNCgkJCQkJd2hpbGUgVHJ1ZToNCgkJCQkJCXRyeToNCgkJCQkJCQlzZWxmLmFwaz1pc2lmaWxlDQoJCQkJCQkJc2VsZi5mcz1vcGVuKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpDQoJCQkJCQkJYnJlYWsNCgkJCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCgkJCQkJCQlwcmludCgoIiAgICVzIiVlKSkNCgkJCQkJCQljb250aW51ZQ0KCQkJCQlzZWxmLmZsPVtdDQoJCQkJCWZvciBpIGluIHNlbGYuZnM6DQoJCQkJCQl0cnk6DQoJCQkJCQkJc2VsZi5mbC5hcHBlbmQoeyJpZCI6aS5zcGxpdCgiPD0+IilbMF0sInB3IjpnZW5lcmF0ZShpLnNwbGl0KCI8PT4iKVsxXSl9KQ0KCQkJCQkJZXhjZXB0OmNvbnRpbnVlDQoJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KCQkJCQlwcmludCgoIiAgICVzIiVlKSkNCgkJCQlwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQ3JhY2sgU3RhcnRlZC4uLiIrcCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQWNjb3VudCBbT0tdIFNhdmVkIHRvIDogb2sudHh0IitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtDUF0gU2F2ZWQgdG8gOiBjcC50eHQiKSkNCgkJCQlUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5tYWluLHNlbGYuZmwpDQoJCQkJb3MucmVtb3ZlKHNlbGYuYXBrKQ0KCQkJCWV4aXQoKQ0KCQkJCWJyZWFrDQoJZGVmIHB3bGlzdChzZWxmKToNCgkJc2VsZi5wdz1pbnB1dChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gUGFzc3dvcmQgTGlzdCA6ICIpLnNwbGl0KCIsIikNCgkJaWYgbGVuKHNlbGYucHcpID09MDoNCgkJCXNlbGYucHdsaXN0KCkNCgkJZWxzZToNCgkJCWZvciBpIGluIHNlbGYuZmw6DQoJCQkJaS51cGRhdGUoeyJwdyI6c2VsZi5wd30pDQoJCQlwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQ3JhY2sgU3RhcnRlZC4uLiIrcCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQWNjb3VudCBbT0tdIFNhdmVkIHRvIDogb2sudHh0IitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtDUF0gU2F2ZWQgdG8gOiBjcC50eHQiKSkNCgkJCVRocmVhZFBvb2woMzApLm1hcChzZWxmLm1haW4sc2VsZi5mbCkNCgkJCW9zLnJlbW92ZShzZWxmLmFwaykNCgkJCWV4aXQoKQ0KCWRlZiBtYWluKHNlbGYsZmwpOg0KCQl0cnk6DQoJCQlmb3IgaSBpbiBmbC5nZXQoInB3Iik6DQoJCQkJbG9nPW1fZmIoZmwuZ2V0KCJpZCIpLA0KCQkJCQlpLCJodHRwczovL20uZmFjZWJvb2suY29tIikNCgkJCQlpZiBsb2cuZ2V0KCJzdGF0dXMiKT09ImNwIjoNCgkJCQkJcHJpbnQoKCJcclx4MWJbMDszM20gKiAtLT4gJXMg4oCiICVzXG4gKiAtLT4gaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tLyVzXG4gICAgICAgICAgICAgICAiJShmbC5nZXQoImlkIiksaSxmbC5nZXQoJ2lkJykpKSkNCgkJCQkJc2VsZi5jcC5hcHBlbmQoIiVzIOKAoiAlcyIlKGZsLmdldCgiaWQiKSxpKSkNCgkJCQkJb3BlbigiY3AudHh0IiwiYSsiKS53cml0ZSgNCgkJCQkJCSIlc3wlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KCQkJCQlicmVhaw0KCQkJCWVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJzdWNjZXNzIjoNCgkJCQkJcHJpbnQoKCJcclx4MWJbMDszMm0gKiAtLT4gJXMg4oCiICVzICAgICAgICAgICAgICAgIiUoZmwuZ2V0KCJpZCIpLGkpKSkNCgkJCQkJc2VsZi5hZGEuYXBwZW5kKCIlcyDigKIgJXMiJShmbC5nZXQoImlkIiksaSkpDQoJCQkJCW9wZW4oIm9rLnR4dCIsImErIikud3JpdGUoDQoJCQkJCQkiJXMg4oCiICVzXG4iJShmbC5nZXQoImlkIiksaSkpDQoJCQkJCWJyZWFrDQoJCQkJZWxzZTpjb250aW51ZQ0KCQkJCQkNCgkJCXNlbGYua28rPTENCgkJCXByaW50KCJcclx4MWJbMDszN20gW1wwMzNbMDs5Nm1DcmFja1wwMzNbMDs5N21dXHgxYlswOzM3bSAlcy8lcyBceDFiWzA7MzdtT0sgOiAlcyBceDFiWzA7MzdtQ1AgOiAlc1x4MWJbMDszN20iJShzZWxmLmtvLGxlbihzZWxmLmZsKSxsZW4oc2VsZi5hZGEpLGxlbihzZWxmLmNwKSksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQ0KCQlleGNlcHQ6DQoJCQlzZWxmLm1haW4oZmwpDQoNCmNsYXNzIGNyZWttdHRsOg0KCW9zLnN5c3RlbSgiY2xlYXIiKQ0KCWJhbm5lcigpDQoJZGVmIF9faW5pdF9fKHNlbGYsaXNpZmlsZSk6DQoJCXNlbGYuYWRhPVtdDQoJCXNlbGYuY3A9W10NCgkJc2VsZi5rbz0wDQoJCXByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDcmFjayBXaXRoIFBhc3MgRGVmYXVsdC9NYW51YWwgW2QvbV0iKSkNCgkJd2hpbGUgVHJ1ZToNCgkJCWY9aW5wdXQocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIENob29zZSA6ICIpDQoJCQlpZiBmPT0iIjpjb250aW51ZQ0KCQkJZWxpZiBmPT0ibSI6DQoJCQkJdHJ5Og0KCQkJCQl3aGlsZSBUcnVlOg0KCQkJCQkJdHJ5Og0KCQkJCQkJCXNlbGYuYXBrPWlzaWZpbGUNCgkJCQkJCQlzZWxmLmZzPW9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkNCgkJCQkJCQlicmVhaw0KCQkJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KCQkJCQkJCXByaW50KCgiICAgJXMiJWUpKQ0KCQkJCQkJCWNvbnRpbnVlDQoJCQkJCXNlbGYuZmw9W10NCgkJCQkJZm9yIGkgaW4gc2VsZi5mczoNCgkJCQkJCXRyeToNCgkJCQkJCQlzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCI8PT4iKVswXX0pDQoJCQkJCQlleGNlcHQ6Y29udGludWUNCgkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQoJCQkJCXByaW50KCgiICAgJXMiJWUpKQ0KCQkJCQljb250aW51ZQ0KCQkJCXByaW50KChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gRXhhbXBsZSA6IHNheWFuZyxrb250b2wsMTIzNDU2IikpDQoJCQkJc2VsZi5wd2xpc3QoKQ0KCQkJCWJyZWFrDQoJCQllbGlmIGY9PSJkIjoNCgkJCQl0cnk6DQoJCQkJCXdoaWxlIFRydWU6DQoJCQkJCQl0cnk6DQoJCQkJCQkJc2VsZi5hcGs9aXNpZmlsZQ0KCQkJCQkJCXNlbGYuZnM9b3BlbihzZWxmLmFwaykucmVhZCgpLnNwbGl0bGluZXMoKQ0KCQkJCQkJCWJyZWFrDQoJCQkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQoJCQkJCQkJcHJpbnQoKCIgICAlcyIlZSkpDQoJCQkJCQkJY29udGludWUNCgkJCQkJc2VsZi5mbD1bXQ0KCQkJCQlmb3IgaSBpbiBzZWxmLmZzOg0KCQkJCQkJdHJ5Og0KCQkJCQkJCXNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIjw9PiIpWzBdLCJwdyI6Z2VuZXJhdGUoaS5zcGxpdCgiPD0+IilbMV0pfSkNCgkJCQkJCWV4Y2VwdDpjb250aW51ZQ0KCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCgkJCQkJcHJpbnQoKCIgICAlcyIlZSkpDQoJCQkJcHJpbnQoKHArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIENyYWNrIFN0YXJ0ZWQuLi4iK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW09LXSBTYXZlZCB0byA6IG9rLnR4dCIrcCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQWNjb3VudCBbQ1BdIFNhdmVkIHRvIDogY3AudHh0IikpDQoJCQkJVGhyZWFkUG9vbCgzMCkubWFwKHNlbGYubWFpbixzZWxmLmZsKQ0KCQkJCW9zLnJlbW92ZShzZWxmLmFwaykNCgkJCQlleGl0KCkNCgkJCQlicmVhaw0KCWRlZiBwd2xpc3Qoc2VsZik6DQoJCXNlbGYucHc9aW5wdXQocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIFBhc3N3b3JkIExpc3QgOiAiKS5zcGxpdCgiLCIpDQoJCWlmIGxlbihzZWxmLnB3KSA9PTA6DQoJCQlzZWxmLnB3bGlzdCgpDQoJCWVsc2U6DQoJCQlmb3IgaSBpbiBzZWxmLmZsOg0KCQkJCWkudXBkYXRlKHsicHciOnNlbGYucHd9KQ0KCQkJcHJpbnQoKHArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIENyYWNrIFN0YXJ0ZWQuLi4iK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW09LXSBTYXZlZCB0byA6IG9rLnR4dCIrcCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQWNjb3VudCBbQ1BdIFNhdmVkIHRvIDogY3AudHh0IikpDQoJCQlUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5tYWluLHNlbGYuZmwpDQoJCQlvcy5yZW1vdmUoc2VsZi5hcGspDQoJCQlleGl0KCkNCglkZWYgbWFpbihzZWxmLGZsKToNCgkJdHJ5Og0KCQkJZm9yIGkgaW4gZmwuZ2V0KCJwdyIpOg0KCQkJCWxvZz1tX2ZiKGZsLmdldCgiaWQiKSwNCgkJCQkJaSwiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbSIpDQoJCQkJaWYgbG9nLmdldCgic3RhdHVzIik9PSJjcCI6DQoJCQkJCXRyeToNCgkJCQkJCWtlPXJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitmbC5nZXQoImlkIikrIj9hY2Nlc3NfdG9rZW49IitvcGVuKCJsb2dpbi50eHQiLCJyIikucmVhZCgpKQ0KCQkJCQkJdHQ9anNvbi5sb2FkcyhrZS50ZXh0KQ0KCQkJCQkJdHRsPXR0WyJiaXJ0aGRheSJdDQoJCQkJCWV4Y2VwdDpwYXNzDQoJCQkJCXByaW50KCJcclx4MWJbMDszM20gKiAtLT4gJXMg4oCiICVzIOKAoiAlcyBceDFiWzBtICAgIiUoZmwuZ2V0KCJpZCIpLGksc3RyKHR0bCkpKQ0KCQkJCQlzZWxmLmNwLmFwcGVuZCgiJXMg4oCiICVzIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KCQkJCQlvcGVuKCJjcC50eHQiLCJhKyIpLndyaXRlKA0KCQkJCQkJIiVzfCVzfCVzXG4iJShmbC5nZXQoImlkIiksaSxzdHIodHRsKSkpDQoJCQkJCWJyZWFrDQoJCQkJZWxpZiBsb2cuZ2V0KCJzdGF0dXMiKT09InN1Y2Nlc3MiOg0KCQkJCQlwcmludCgoIlxyXHgxYlswOzMybSAqIC0tPiAlcyDigKIgJXMgICAgICAgICAgICAgICAiJShmbC5nZXQoImlkIiksaSkpKQ0KCQkJCQlzZWxmLmFkYS5hcHBlbmQoIiVzIOKAoiAlcyIlKGZsLmdldCgiaWQiKSxpKSkNCgkJCQkJaWYgZmwuZ2V0KCJpZCIpIGluIG9wZW4oIm9rLnR4dCIpLnJlYWQoKToNCgkJCQkJCWJyZWFrDQoJCQkJCWVsc2U6DQoJCQkJCQlvcGVuKCJvay50eHQiLCJhKyIpLndyaXRlKA0KCQkJCQkJIiVzIOKAoiAlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KCQkJCQlicmVhaw0KCQkJCWVsc2U6Y29udGludWUNCgkJCQkJDQoJCQlzZWxmLmtvKz0xDQoJCQlwcmludCgiXHJceDFiWzA7MzdtIFtcMDMzWzA7OTZtQ3JhY2tcMDMzWzA7OTdtXVx4MWJbMDszN20gJXMvJXMgXHgxYlswOzM3bU9LIDogJXMgXHgxYlswOzM3bUNQIDogJXNceDFiWzA7MzdtIiUoc2VsZi5rbyxsZW4oc2VsZi5mbCksbGVuKHNlbGYuYWRhKSxsZW4oc2VsZi5jcCkpLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCgkJZXhjZXB0Og0KCQkJc2VsZi5tYWluKGZsKQ0KDQpjbGFzcyB0b2ZiZToNCglvcy5zeXN0ZW0oImNsZWFyIikNCgliYW5uZXIoKQ0KCWRlZiBfX2luaXRfXyhzZWxmLGlzaWZpbGUpOg0KCQlzZWxmLmFkYT1bXQ0KCQlzZWxmLmNwPVtdDQoJCXNlbGYua289MA0KCQlwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQ3JhY2sgV2l0aCBQYXNzIERlZmF1bHQvTWFudWFsIFtkL21dIikpDQoJCXdoaWxlIFRydWU6DQoJCQlmPWlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDaG9vc2UgOiAiKQ0KCQkJaWYgZj09IiI6Y29udGludWUNCgkJCWVsaWYgZj09Im0iOg0KCQkJCXRyeToNCgkJCQkJd2hpbGUgVHJ1ZToNCgkJCQkJCXRyeToNCgkJCQkJCQlzZWxmLmFwaz1pc2lmaWxlDQoJCQkJCQkJc2VsZi5mcz1vcGVuKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpDQoJCQkJCQkJYnJlYWsNCgkJCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCgkJCQkJCQlwcmludCgoIiAgICVzIiVlKSkNCgkJCQkJCQljb250aW51ZQ0KCQkJCQlzZWxmLmZsPVtdDQoJCQkJCWZvciBpIGluIHNlbGYuZnM6DQoJCQkJCQl0cnk6DQoJCQkJCQkJc2VsZi5mbC5hcHBlbmQoeyJpZCI6aS5zcGxpdCgiPD0+IilbMF19KQ0KCQkJCQkJZXhjZXB0OmNvbnRpbnVlDQoJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KCQkJCQlwcmludCgoIiAgICVzIiVlKSkNCgkJCQkJY29udGludWUNCgkJCQlwcmludCgocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEV4YW1wbGUgOiBzYXlhbmcsa29udG9sLDEyMzQ1NiIpKQ0KCQkJCXNlbGYucHdsaXN0KCkNCgkJCQlicmVhaw0KCQkJZWxpZiBmPT0iZCI6DQoJCQkJdHJ5Og0KCQkJCQl3aGlsZSBUcnVlOg0KCQkJCQkJdHJ5Og0KCQkJCQkJCXNlbGYuYXBrPWlzaWZpbGUNCgkJCQkJCQlzZWxmLmZzPW9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkNCgkJCQkJCQlicmVhaw0KCQkJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KCQkJCQkJCXByaW50KCgiICAgJXMiJWUpKQ0KCQkJCQkJCWNvbnRpbnVlDQoJCQkJCXNlbGYuZmw9W10NCgkJCQkJZm9yIGkgaW4gc2VsZi5mczoNCgkJCQkJCXRyeToNCgkJCQkJCQlzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCI8PT4iKVswXSwicHciOmdlbmVyYXRlKGkuc3BsaXQoIjw9PiIpWzFdKX0pDQoJCQkJCQlleGNlcHQ6Y29udGludWUNCgkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQoJCQkJCXByaW50KCgiICAgJXMiJWUpKQ0KCQkJCXByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDcmFjayBTdGFydGVkLi4uIitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW0NQXSBTYXZlZCB0byA6IGNwLnR4dCIpKQ0KCQkJCVRocmVhZFBvb2woMzApLm1hcChzZWxmLm1haW4sc2VsZi5mbCkNCgkJCQlvcy5yZW1vdmUoc2VsZi5hcGspDQoJCQkJZXhpdCgpDQoJCQkJYnJlYWsNCglkZWYgcHdsaXN0KHNlbGYpOg0KCQlzZWxmLnB3PWlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBQYXNzd29yZCBMaXN0IDogIikuc3BsaXQoIiwiKQ0KCQlpZiBsZW4oc2VsZi5wdykgPT0wOg0KCQkJc2VsZi5wd2xpc3QoKQ0KCQllbHNlOg0KCQkJZm9yIGkgaW4gc2VsZi5mbDoNCgkJCQlpLnVwZGF0ZSh7InB3IjpzZWxmLnB3fSkNCgkJCXByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDcmFjayBTdGFydGVkLi4uIitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW0NQXSBTYXZlZCB0byA6IGNwLnR4dCIpKQ0KCQkJVGhyZWFkUG9vbCgzMCkubWFwKHNlbGYubWFpbixzZWxmLmZsKQ0KCQkJb3MucmVtb3ZlKHNlbGYuYXBrKQ0KCQkJZXhpdCgpDQoJZGVmIG1haW4oc2VsZixmbCk6DQoJCXRyeToNCgkJCWZvciBpIGluIGZsLmdldCgicHciKToNCgkJCQlsb2c9dG91Y2hfZmIoZmwuZ2V0KCJpZCIpLA0KCQkJCQlpLCJodHRwczovL3RvdWNoLmZhY2Vib29rLmNvbSIpDQoJCQkJaWYgbG9nLmdldCgic3RhdHVzIik9PSJjcCI6DQoJCQkJCXByaW50KCgiXHJceDFiWzA7MzNtICogLS0+ICVzIOKAoiAlc1xuICogLS0+IGh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS8lc1xuICAgICAgICAgICAgICAgIiUoZmwuZ2V0KCJpZCIpLGksZmwuZ2V0KCJpZCIpKSkpDQoJCQkJCXNlbGYuY3AuYXBwZW5kKCIlcyDigKIgJXMiJShmbC5nZXQoImlkIiksaSkpDQoJCQkJCW9wZW4oImNwLnR4dCIsImErIikud3JpdGUoDQoJCQkJCQkiJXN8JXNcbiIlKGZsLmdldCgiaWQiKSxpKSkNCgkJCQkJYnJlYWsNCgkJCQllbGlmIGxvZy5nZXQoInN0YXR1cyIpPT0ic3VjY2VzcyI6DQoJCQkJCXByaW50KCgiXHJceDFiWzA7MzJtICogLS0+ICVzIOKAoiAlcyAgICAgICAgICAgICAgICIlKGZsLmdldCgiaWQiKSxpKSkpDQoJCQkJCXNlbGYuYWRhLmFwcGVuZCgiJXMg4oCiICVzIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KCQkJCQlvcGVuKCJvay50eHQiLCJhKyIpLndyaXRlKA0KCQkJCQkJIiVzIOKAoiAlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KCQkJCQlicmVhaw0KCQkJCWVsc2U6Y29udGludWUNCgkJCQkJDQoJCQlzZWxmLmtvKz0xDQoJCQlwcmludCgiXG5ceDFiWzA7MzdtIFtcMDMzWzA7OTZtQ3JhY2tcMDMzWzA7OTdtXVx4MWJbMDszN20gJXMvJXMgXHgxYlswOzM3bU9LIDogJXMgXHgxYlswOzM3bUNQIDogJXNceDFiWzA7MzdtIiUoc2VsZi5rbyxsZW4oc2VsZi5mbCksbGVuKHNlbGYuYWRhKSxsZW4oc2VsZi5jcCkpLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCgkJZXhjZXB0Og0KCQkJc2VsZi5tYWluKGZsKQ0KDQpjbGFzcyB0b2ZiZXR0bDoNCglvcy5zeXN0ZW0oImNsZWFyIikNCgliYW5uZXIoKQ0KCWRlZiBfX2luaXRfXyhzZWxmLGlzaWZpbGUpOg0KCQlzZWxmLmFkYT1bXQ0KCQlzZWxmLmNwPVtdDQoJCXNlbGYua289MA0KCQlwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQ3JhY2sgV2l0aCBQYXNzIERlZmF1bHQvTWFudWFsIFtkL21dIikpDQoJCXdoaWxlIFRydWU6DQoJCQlmPWlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDaG9vc2UgOiAiKQ0KCQkJaWYgZj09IiI6Y29udGludWUNCgkJCWVsaWYgZj09Im0iOg0KCQkJCXRyeToNCgkJCQkJd2hpbGUgVHJ1ZToNCgkJCQkJCXRyeToNCgkJCQkJCQlzZWxmLmFwaz1pc2lmaWxlDQoJCQkJCQkJc2VsZi5mcz1vcGVuKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpDQoJCQkJCQkJYnJlYWsNCgkJCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCgkJCQkJCQlwcmludCgoIiAgICVzIiVlKSkNCgkJCQkJCQljb250aW51ZQ0KCQkJCQlzZWxmLmZsPVtdDQoJCQkJCWZvciBpIGluIHNlbGYuZnM6DQoJCQkJCQl0cnk6DQoJCQkJCQkJc2VsZi5mbC5hcHBlbmQoeyJpZCI6aS5zcGxpdCgiPD0+IilbMF19KQ0KCQkJCQkJZXhjZXB0OmNvbnRpbnVlDQoJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KCQkJCQlwcmludCgoIiAgICVzIiVlKSkNCgkJCQkJY29udGludWUNCgkJCQlwcmludCgocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEV4YW1wbGUgOiBzYXlhbmcsa29udG9sLDEyMzQ1NiIpKQ0KCQkJCXNlbGYucHdsaXN0KCkNCgkJCQlicmVhaw0KCQkJZWxpZiBmPT0iZCI6DQoJCQkJdHJ5Og0KCQkJCQl3aGlsZSBUcnVlOg0KCQkJCQkJdHJ5Og0KCQkJCQkJCXNlbGYuYXBrPWlzaWZpbGUNCgkJCQkJCQlzZWxmLmZzPW9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkNCgkJCQkJCQlicmVhaw0KCQkJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KCQkJCQkJCXByaW50KCgiICAgJXMiJWUpKQ0KCQkJCQkJCWNvbnRpbnVlDQoJCQkJCXNlbGYuZmw9W10NCgkJCQkJZm9yIGkgaW4gc2VsZi5mczoNCgkJCQkJCXRyeToNCgkJCQkJCQlzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCI8PT4iKVswXSwicHciOmdlbmVyYXRlKGkuc3BsaXQoIjw9PiIpWzFdKX0pDQoJCQkJCQlleGNlcHQ6Y29udGludWUNCgkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQoJCQkJCXByaW50KCgiICAgJXMiJWUpKQ0KCQkJCXByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDcmFjayBTdGFydGVkLi4uIitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW0NQXSBTYXZlZCB0byA6IGNwLnR4dCIpKQ0KCQkJCVRocmVhZFBvb2woMzUpLm1hcChzZWxmLm1haW4sc2VsZi5mbCkNCgkJCQlvcy5yZW1vdmUoc2VsZi5hcGspDQoJCQkJZXhpdCgpDQoJCQkJYnJlYWsNCglkZWYgcHdsaXN0KHNlbGYpOg0KCQlzZWxmLnB3PWlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBQYXNzd29yZCBMaXN0IDogIikuc3BsaXQoIiwiKQ0KCQlpZiBsZW4oc2VsZi5wdykgPT0wOg0KCQkJc2VsZi5wd2xpc3QoKQ0KCQllbHNlOg0KCQkJZm9yIGkgaW4gc2VsZi5mbDoNCgkJCQlpLnVwZGF0ZSh7InB3IjpzZWxmLnB3fSkNCgkJCXByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDcmFjayBTdGFydGVkLi4uIitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW0NQXSBTYXZlZCB0byA6IGNwLnR4dCIpKQ0KCQkJVGhyZWFkUG9vbCgzMCkubWFwKHNlbGYubWFpbixzZWxmLmZsKQ0KCQkJb3MucmVtb3ZlKHNlbGYuYXBrKQ0KCQkJZXhpdCgpDQoJZGVmIG1haW4oc2VsZixmbCk6DQoJCXRyeToNCgkJCWZvciBpIGluIGZsLmdldCgicHciKToNCgkJCQlsb2c9dG91Y2hfZmIoZmwuZ2V0KCJpZCIpLA0KCQkJCQlpLCJodHRwczovL3RvdWNoLmZhY2Vib29rLmNvbSIpDQoJCQkJaWYgbG9nLmdldCgic3RhdHVzIik9PSJjcCI6DQoJCQkJCXRyeToNCgkJCQkJCWtlPXJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitmbC5nZXQoImlkIikrIj9hY2Nlc3NfdG9rZW49IitvcGVuKCJsb2dpbi50eHQiLCJyIikucmVhZCgpKQ0KCQkJCQkJdHQ9anNvbi5sb2FkcyhrZS50ZXh0KQ0KCQkJCQkJdHRsPXR0WyJiaXJ0aGRheSJdDQoJCQkJCWV4Y2VwdDpwYXNzDQoJCQkJCXByaW50KCJcclx4MWJbMDszM20gKiAtLT4gJXMg4oCiICVzIOKAoiAlcyBceDFiWzBtICAgIiUoZmwuZ2V0KCJpZCIpLGksc3RyKHR0bCkpKQ0KCQkJCQlzZWxmLmNwLmFwcGVuZCgiJXMg4oCiICVzIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KCQkJCQlvcGVuKCJjcC50eHQiLCJhKyIpLndyaXRlKA0KCQkJCQkJIiVzfCVzfCVzXG4iJShmbC5nZXQoImlkIiksaSxzdHIodHRsKSkpDQoJCQkJCWJyZWFrDQoJCQkJZWxpZiBsb2cuZ2V0KCJzdGF0dXMiKT09InN1Y2Nlc3MiOg0KCQkJCQlwcmludCgoIlxyXHgxYlswOzMybSAqIC0tPiAlcyDigKIgJXMgICAgICAgICAgICAgICAiJShmbC5nZXQoImlkIiksaSkpKQ0KCQkJCQlzZWxmLmFkYS5hcHBlbmQoIiVzIOKAoiAlcyIlKGZsLmdldCgiaWQiKSxpKSkNCgkJCQkJaWYgZmwuZ2V0KCJpZCIpIGluIG9wZW4oIm9rLnR4dCIpLnJlYWQoKToNCgkJCQkJCWJyZWFrDQoJCQkJCWVsc2U6DQoJCQkJCQlvcGVuKCJvay50eHQiLCJhKyIpLndyaXRlKA0KCQkJCQkJIiVzIOKAoiAlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KCQkJCQlicmVhaw0KCQkJCWVsc2U6Y29udGludWUNCgkJCQkJDQoJCQlzZWxmLmtvKz0xDQoJCQlwcmludCgiXHJceDFiWzA7MzdtIFtcMDMzWzA7OTZtQ3JhY2tcMDMzWzA7OTdtXVx4MWJbMDszN20gJXMvJXMgXHgxYlswOzM3bU9LIDogJXMgXHgxYlswOzM3bUNQIDogJXNceDFiWzA7MzdtIiUoc2VsZi5rbyxsZW4oc2VsZi5mbCksbGVuKHNlbGYuYWRhKSxsZW4oc2VsZi5jcCkpLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCgkJZXhjZXB0Og0KCQkJc2VsZi5tYWluKGZsKQ0KDQpjbGFzcyBmcmVlZmI6DQoJb3Muc3lzdGVtKCJjbGVhciIpDQoJYmFubmVyKCkNCglkZWYgX19pbml0X18oc2VsZixpc2lmaWxlKToNCgkJc2VsZi5hZGE9W10NCgkJc2VsZi5jcD1bXQ0KCQlzZWxmLmtvPTANCgkJcHJpbnQoKHArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIENyYWNrIFdpdGggUGFzcyBEZWZhdWx0L01hbnVhbCBbZC9tXSIpKQ0KCQl3aGlsZSBUcnVlOg0KCQkJZj1pbnB1dChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gQ2hvb3NlIDogIikNCgkJCWlmIGY9PSIiOmNvbnRpbnVlDQoJCQllbGlmIGY9PSJtIjoNCgkJCQl0cnk6DQoJCQkJCXdoaWxlIFRydWU6DQoJCQkJCQl0cnk6DQoJCQkJCQkJc2VsZi5hcGs9aXNpZmlsZQ0KCQkJCQkJCXNlbGYuZnM9b3BlbihzZWxmLmFwaykucmVhZCgpLnNwbGl0bGluZXMoKQ0KCQkJCQkJCWJyZWFrDQoJCQkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQoJCQkJCQkJcHJpbnQoKCIgICAlcyIlZSkpDQoJCQkJCQkJY29udGludWUNCgkJCQkJc2VsZi5mbD1bXQ0KCQkJCQlmb3IgaSBpbiBzZWxmLmZzOg0KCQkJCQkJdHJ5Og0KCQkJCQkJCXNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIjw9PiIpWzBdfSkNCgkJCQkJCWV4Y2VwdDpjb250aW51ZQ0KCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCgkJCQkJcHJpbnQoKCIgICAlcyIlZSkpDQoJCQkJCWNvbnRpbnVlDQoJCQkJcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBFeGFtcGxlIDogc2F5YW5nLGtvbnRvbCwxMjM0NTYiKSkNCgkJCQlzZWxmLnB3bGlzdCgpDQoJCQkJYnJlYWsNCgkJCWVsaWYgZj09ImQiOg0KCQkJCXRyeToNCgkJCQkJd2hpbGUgVHJ1ZToNCgkJCQkJCXRyeToNCgkJCQkJCQlzZWxmLmFwaz1pc2lmaWxlDQoJCQkJCQkJc2VsZi5mcz1vcGVuKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpDQoJCQkJCQkJYnJlYWsNCgkJCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCgkJCQkJCQlwcmludCgoIiAgICVzIiVlKSkNCgkJCQkJCQljb250aW51ZQ0KCQkJCQlzZWxmLmZsPVtdDQoJCQkJCWZvciBpIGluIHNlbGYuZnM6DQoJCQkJCQl0cnk6DQoJCQkJCQkJc2VsZi5mbC5hcHBlbmQoeyJpZCI6aS5zcGxpdCgiPD0+IilbMF0sInB3IjpnZW5lcmF0ZShpLnNwbGl0KCI8PT4iKVsxXSl9KQ0KCQkJCQkJZXhjZXB0OmNvbnRpbnVlDQoJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KCQkJCQlwcmludCgoIiAgICVzIiVlKSkNCgkJCQlwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQ3JhY2sgU3RhcnRlZC4uLiIrcCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQWNjb3VudCBbT0tdIFNhdmVkIHRvIDogb2sudHh0IitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtDUF0gU2F2ZWQgdG8gOiBjcC50eHQiKSkNCgkJCQlUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5tYWluLHNlbGYuZmwpDQoJCQkJb3MucmVtb3ZlKHNlbGYuYXBrKQ0KCQkJCWV4aXQoKQ0KCQkJCWJyZWFrDQoJZGVmIHB3bGlzdChzZWxmKToNCgkJc2VsZi5wdz1pbnB1dChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gUGFzc3dvcmQgTGlzdCA6ICIpLnNwbGl0KCIsIikNCgkJaWYgbGVuKHNlbGYucHcpID09MDoNCgkJCXNlbGYucHdsaXN0KCkNCgkJZWxzZToNCgkJCWZvciBpIGluIHNlbGYuZmw6DQoJCQkJaS51cGRhdGUoeyJwdyI6c2VsZi5wd30pDQoJCQlwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQ3JhY2sgU3RhcnRlZC4uLiIrcCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQWNjb3VudCBbT0tdIFNhdmVkIHRvIDogb2sudHh0IitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtDUF0gU2F2ZWQgdG8gOiBjcC50eHQiKSkNCgkJCVRocmVhZFBvb2woMzApLm1hcChzZWxmLm1haW4sc2VsZi5mbCkNCgkJCW9zLnJlbW92ZShzZWxmLmFwaykNCgkJCWV4aXQoKQ0KCWRlZiBtYWluKHNlbGYsZmwpOg0KCQl0cnk6DQoJCQlmb3IgaSBpbiBmbC5nZXQoInB3Iik6DQoJCQkJbG9nPWZfZmIoZmwuZ2V0KCJpZCIpLA0KCQkJCQlpLGZyZWVmYWNlYm9vaykNCgkJCQlpZiBsb2cuZ2V0KCJzdGF0dXMiKT09ImNwIjoNCgkJCQkJcHJpbnQoKCJcclx4MWJbMDszM20gKiAtLT4gJXMg4oCiICVzXG4gKiAtLT4gJXMg4oCiICVzXG4gKiAtLT4gaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tLyVzXG4gICAgICAgICAgICAgICAiJShmbC5nZXQoImlkIiksaSxmbC5nZXQoImlkIikpKSkNCgkJCQkJc2VsZi5jcC5hcHBlbmQoIiVzIOKAoiAlcyIlKGZsLmdldCgiaWQiKSxpKSkNCgkJCQkJb3BlbigiY3AudHh0IiwiYSsiKS53cml0ZSgNCgkJCQkJCSIlc3wlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQ0KCQkJCQlicmVhaw0KCQkJCWVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJzdWNjZXNzIjoNCgkJCQkJcHJpbnQoIlxyXHgxYlswOzMybSAqIC0tPiAlcyDigKIgJXMgICAgICAgICAgICAgICIlKGZsLmdldCgiaWQiKSxpKSkNCgkJCQkJc2VsZi5hZGEuYXBwZW5kKCIlcyDigKIgJXMiJShmbC5nZXQoImlkIiksaSkpDQoJCQkJCW9wZW4oIm9rLnR4dCIsImErIikud3JpdGUoDQoJCQkJCQkiJXMg4oCiICVzXG4iJShmbC5nZXQoImlkIiksaSkpDQoJCQkJCWJyZWFrDQoJCQkJZWxzZTpjb250aW51ZQ0KCQkJCQkNCgkJCXNlbGYua28rPTENCgkJCXByaW50KCJcclx4MWJbMDszN20gW1wwMzNbMDs5Nm1DcmFja1wwMzNbMDs5N21dXHgxYlswOzM3bSAlcy8lcyBceDFiWzA7MzdtT0sgOiAlcyBceDFiWzA7MzdtQ1AgOiAlc1x4MWJbMDszN20iJShzZWxmLmtvLGxlbihzZWxmLmZsKSxsZW4oc2VsZi5hZGEpLGxlbihzZWxmLmNwKSksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQ0KCQlleGNlcHQ6DQoJCQlzZWxmLm1haW4oZmwpDQoNCmNsYXNzIGZyZWVmYnR0bDoNCglvcy5zeXN0ZW0oImNsZWFyIikNCgliYW5uZXIoKQ0KCWRlZiBfX2luaXRfXyhzZWxmLGlzaWZpbGUpOg0KCQlzZWxmLmFkYT1bXQ0KCQlzZWxmLmNwPVtdDQoJCXNlbGYua289MA0KCQlwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQ3JhY2sgV2l0aCBQYXNzIERlZmF1bHQvTWFudWFsIFtkL21dIikpDQoJCXdoaWxlIFRydWU6DQoJCQlmPWlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDaG9vc2UgOiAiKQ0KCQkJaWYgZj09IiI6Y29udGludWUNCgkJCWVsaWYgZj09Im0iOg0KCQkJCXRyeToNCgkJCQkJd2hpbGUgVHJ1ZToNCgkJCQkJCXRyeToNCgkJCQkJCQlzZWxmLmFwaz1pc2lmaWxlDQoJCQkJCQkJc2VsZi5mcz1vcGVuKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpDQoJCQkJCQkJYnJlYWsNCgkJCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCgkJCQkJCQlwcmludCgoIiAgICVzIiVlKSkNCgkJCQkJCQljb250aW51ZQ0KCQkJCQlzZWxmLmZsPVtdDQoJCQkJCWZvciBpIGluIHNlbGYuZnM6DQoJCQkJCQl0cnk6DQoJCQkJCQkJc2VsZi5mbC5hcHBlbmQoeyJpZCI6aS5zcGxpdCgiPD0+IilbMF19KQ0KCQkJCQkJZXhjZXB0OmNvbnRpbnVlDQoJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KCQkJCQlwcmludCgoIiAgICVzIiVlKSkNCgkJCQkJY29udGludWUNCgkJCQlwcmludCgocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEV4YW1wbGUgOiBzYXlhbmcsa29udG9sLDEyMzQ1NiIpKQ0KCQkJCXNlbGYucHdsaXN0KCkNCgkJCQlicmVhaw0KCQkJZWxpZiBmPT0iZCI6DQoJCQkJdHJ5Og0KCQkJCQl3aGlsZSBUcnVlOg0KCQkJCQkJdHJ5Og0KCQkJCQkJCXNlbGYuYXBrPWlzaWZpbGUNCgkJCQkJCQlzZWxmLmZzPW9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkNCgkJCQkJCQlicmVhaw0KCQkJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KCQkJCQkJCXByaW50KCgiICAgJXMiJWUpKQ0KCQkJCQkJCWNvbnRpbnVlDQoJCQkJCXNlbGYuZmw9W10NCgkJCQkJZm9yIGkgaW4gc2VsZi5mczoNCgkJCQkJCXRyeToNCgkJCQkJCQlzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCI8PT4iKVswXSwicHciOmdlbmVyYXRlKGkuc3BsaXQoIjw9PiIpWzFdKX0pDQoJCQkJCQlleGNlcHQ6Y29udGludWUNCgkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQoJCQkJCXByaW50KCgiICAgJXMiJWUpKQ0KCQkJCXByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDcmFjayBTdGFydGVkLi4uIitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW0NQXSBTYXZlZCB0byA6IGNwLnR4dCIpKQ0KCQkJCVRocmVhZFBvb2woMzApLm1hcChzZWxmLm1haW4sc2VsZi5mbCkNCgkJCQlvcy5yZW1vdmUoc2VsZi5hcGspDQoJCQkJZXhpdCgpDQoJCQkJYnJlYWsNCglkZWYgcHdsaXN0KHNlbGYpOg0KCQlzZWxmLnB3PWlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBQYXNzd29yZCBMaXN0IDogIikuc3BsaXQoIiwiKQ0KCQlpZiBsZW4oc2VsZi5wdykgPT0wOg0KCQkJc2VsZi5wd2xpc3QoKQ0KCQllbHNlOg0KCQkJZm9yIGkgaW4gc2VsZi5mbDoNCgkJCQlpLnVwZGF0ZSh7InB3IjpzZWxmLnB3fSkNCgkJCXByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDcmFjayBTdGFydGVkLi4uIitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW0NQXSBTYXZlZCB0byA6IGNwLnR4dCIpKQ0KCQkJVGhyZWFkUG9vbCgzMCkubWFwKHNlbGYubWFpbixzZWxmLmZsKQ0KCQkJb3MucmVtb3ZlKHNlbGYuYXBrKQ0KCQkJZXhpdCgpDQoJZGVmIG1haW4oc2VsZixmbCk6DQoJCXRyeToNCgkJCWZvciBpIGluIGZsLmdldCgicHciKToNCgkJCQlsb2c9Zl9mYihmbC5nZXQoImlkIiksDQoJCQkJCWksZnJlZWZhY2Vib29rKQ0KCQkJCWlmIGxvZy5nZXQoInN0YXR1cyIpPT0iY3AiOg0KCQkJCQl0cnk6DQoJCQkJCQlrZT1yZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIrZmwuZ2V0KCJpZCIpKyI/YWNjZXNzX3Rva2VuPSIrb3BlbigibG9naW4udHh0IiwiciIpLnJlYWQoKSkNCgkJCQkJCXR0PWpzb24ubG9hZHMoa2UudGV4dCkNCgkJCQkJCXR0bD10dFsiYmlydGhkYXkiXQ0KCQkJCQlleGNlcHQ6cGFzcw0KCQkJCQlwcmludCgiXHJceDFiWzA7MzNtICogLS0+ICVzIOKAoiAlcyDigKIgJXMgXHgxYlswbSAgICIlKGZsLmdldCgiaWQiKSxpLHN0cih0dGwpKSkNCgkJCQkJc2VsZi5jcC5hcHBlbmQoIiVzIOKAoiAlcyIlKGZsLmdldCgiaWQiKSxpKSkNCgkJCQkJb3BlbigiY3AudHh0IiwiYSsiKS53cml0ZSgNCgkJCQkJCSIlc3wlc3wlc1xuIiUoZmwuZ2V0KCJpZCIpLGksc3RyKHR0bCkpKQ0KCQkJCQlicmVhaw0KCQkJCWVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJzdWNjZXNzIjoNCgkJCQkJcHJpbnQoKCJcclx4MWJbMDszMm0gKiAtLT4gJXMg4oCiICVzICAgICAgICAgICAgICAgIiUoZmwuZ2V0KCJpZCIpLGkpKSkNCgkJCQkJc2VsZi5hZGEuYXBwZW5kKCIlcyDigKIgJXMiJShmbC5nZXQoImlkIiksaSkpDQoJCQkJCWlmIGZsLmdldCgiaWQiKSBpbiBvcGVuKCJvay50eHQiKS5yZWFkKCk6DQoJCQkJCQlicmVhaw0KCQkJCQllbHNlOg0KCQkJCQkJb3Blbigib2sudHh0IiwiYSsiKS53cml0ZSgNCgkJCQkJCSIlcyDigKIgJXNcbiIlKGZsLmdldCgiaWQiKSxpKSkNCgkJCQkJYnJlYWsNCgkJCQllbHNlOmNvbnRpbnVlDQoJCQkJCQ0KCQkJc2VsZi5rbys9MQ0KCQkJcHJpbnQoIlxyXHgxYlswOzM3bSBbXDAzM1swOzk2bUNyYWNrXDAzM1swOzk3bV1ceDFiWzA7MzdtICVzLyVzIFx4MWJbMDszN21PSyA6ICVzIFx4MWJbMDszN21DUCA6ICVzXHgxYlswOzM3bSIlKHNlbGYua28sbGVuKHNlbGYuZmwpLGxlbihzZWxmLmFkYSksbGVuKHNlbGYuY3ApKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQoJCWV4Y2VwdDoNCgkJCXNlbGYubWFpbihmbCkNCg0KY2xhc3MgYmFwaToNCiAgZGVmIF9faW5pdF9fKHNlbGYsaXNpZmlsZSk6DQogICAgc2VsZi5zZXRwdyA9IEZhbHNlDQogICAgc2VsZi5vayA9IFtdDQogICAgc2VsZi5jcCA9IFtdDQogICAgc2VsZi5sb29wID0gMA0KICAgIHNlbGYua3JhaChpc2lmaWxlKQ0KICBkZWYga3JhaChzZWxmLGlzaWZpbGUpOg0KICAgIHByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDcmFjayBXaXRoIFBhc3MgRGVmYXVsdC9NYW51YWwgW2QvbV0iKSkNCiAgICB3aGlsZSBUcnVlOg0KICAgICAgZj1pbnB1dChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gQ2hvb3NlIDogIikNCiAgICAgIGlmIGYgaW5bIiIsIiAiXToNCiAgICAgICAgcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBJbnZhbGlkIE51bWJlciIpKQ0KICAgICAgICBjb250aW51ZQ0KICAgICAgZWxpZiBmIGluWyJtIiwiTSJdOg0KICAgICAgICB0cnk6DQogICAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgc2VsZi5hcGs9aXNpZmlsZQ0KICAgICAgICAgICAgICBzZWxmLmZzPW9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkNCiAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgICAgcHJpbnQoKGsrIlsiK3ArIiEiK2srIl0iK3ArIiAlcyIlZSkpDQogICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgc2VsZi5mbD1bXQ0KICAgICAgICAgIHByaW50KChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gRXhhbXBsZSA6IHNheWFuZyxrb250b2wsMTIzNDU2IikpDQogICAgICAgICAgc2VsZi5wdz1pbnB1dChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gUGFzc3dvcmQgTGlzdCA6ICIpLnNwbGl0KCIsIikNCiAgICAgICAgICBpZiBsZW4oc2VsZi5wdykgPT0wOg0KICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZzOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICBzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCI8PT4iKVswXSwicHciOnNlbGYucHd9KQ0KICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgcHJpbnQoKCIgICVzIiVlKSkNCiAgICAgICAgICBjb250aW51ZQ0KICAgICAgICBwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQ3JhY2sgU3RhcnRlZC4uLiIrcCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQWNjb3VudCBbT0tdIFNhdmVkIHRvIDogb2sudHh0IitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtDUF0gU2F2ZWQgdG8gOiBjcC50eHQiKSkNCiAgICAgICAgVGhyZWFkUG9vbCgzMCkubWFwKHNlbGYuYnJ1dGUsc2VsZi5mbCkNCiAgICAgICAgI29zLnJlbW92ZShzZWxmLmFwaykNCiAgICAgICAgZXhpdCgpDQogICAgICAgIGJyZWFrDQogICAgICBlbGlmIGYgaW5bImQiLCJEIl06DQogICAgICAgIHRyeToNCiAgICAgICAgICB3aGlsZSBUcnVlOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICBzZWxmLmFwaz1pc2lmaWxlDQogICAgICAgICAgICAgIHNlbGYuZnM9b3BlbihzZWxmLmFwaykucmVhZCgpLnNwbGl0bGluZXMoKQ0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgICBwcmludChlKQ0KICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgIHNlbGYuZmw9W10NCiAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZzOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICBzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCI8PT4iKVswXSwicHciOmdlbmVyYXRlKGkuc3BsaXQoIjw9PiIpWzFdKX0pDQogICAgICAgICAgICBleGNlcHQ6Y29udGludWUNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgIHByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDcmFjayBTdGFydGVkLi4uIitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW0NQXSBTYXZlZCB0byA6IGNwLnR4dCIpKQ0KICAgICAgICBUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5icnV0ZSxzZWxmLmZsKQ0KICAgICAgICBvcy5yZW1vdmUoc2VsZi5hcGspDQogICAgICAgIGV4aXQoKQ0KICAgICAgICBicmVhaw0KICBkZWYgYnJ1dGVSZXF1ZXN0KHNlbGYsIHVzZXJuYW1lLCBwYXNzd29yZCk6DQogICAgZ2xvYmFsIG9rLGNwLHR0bA0KICAgIHBhcmFtcyA9IHsiYWNjZXNzX3Rva2VuIjogIjM1MDY4NTUzMTcyOCU3QzYyZjhjZTlmNzRiMTJmODRjMTIzY2MyMzQzN2E0YTMyIiwgICJmb3JtYXQiOiAiSlNPTiIsICJzZGtfdmVyc2lvbiI6ICIyIiwgImVtYWlsIjogdXNlcm5hbWUsICJsb2NhbGUiOiAiZW5fVVMiLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgInNkayI6ICJpb3MiLCAiZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzIjogIjEiLCAic2lnIjogIjNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2In0NCiAgICBhcGkgPSAiaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4iDQogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoYXBpLCBwYXJhbXM9cGFyYW1zKQ0KICAgIGlmIHJlLnNlYXJjaCgiKEVBQUEpXFx3KyIsIHJlc3BvbnNlLnRleHQpOg0KICAgICAgc2VsZi5vay5hcHBlbmQodXNlcm5hbWUgKyAiIOKAoiAiICsgcGFzc3dvcmQpDQogICAgICBwcmludCgoIlxyXHgxYlswOzMybSAqIC0tPiAlcyDigKIgJXMgJXMgICAgICAgICAgICAgICAiJSh1c2VybmFtZSxwYXNzd29yZCxOKSkpDQogICAgICBvay5hcHBlbmQodXNlcm5hbWUgKyAiIOKAoiAiICsgcGFzc3dvcmQpDQogICAgICBzYXZlID0gb3Blbigib2sudHh0IiwgImEiKQ0KICAgICAgc2F2ZS53cml0ZShzdHIodXNlcm5hbWUpICsgIiDigKIgIiArIHN0cihwYXNzd29yZCkgKyAiXG4iKQ0KICAgICAgc2F2ZS5jbG9zZSgpDQogICAgICByZXR1cm4gVHJ1ZQ0KICAgIGVsc2U6DQogICAgICBpZiAid3d3LmZhY2Vib29rLmNvbSIgaW4gcmVzcG9uc2UuanNvbigpWyJlcnJvcl9tc2ciXToNCiAgICAgICAgc2VsZi5jcC5hcHBlbmQodXNlcm5hbWUgKyAiIOKAoiAiICsgcGFzc3dvcmQpDQogICAgICAgIHByaW50KCgiXHJceDFiWzA7MzNtICogLS0+ICVzIOKAoiAlc1xuICogLS0+IGh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS8lc1xuICVzICAgICAgICAgICAgICAgIiUodXNlcm5hbWUscGFzc3dvcmQsdXNlcm5hbWUsTikpKQ0KICAgICAgICBzYXZlID0gb3BlbigiY3AudHh0IiwgImErIikNCiAgICAgICAgc2F2ZS53cml0ZShzdHIodXNlcm5hbWUpICsgInwiICsgc3RyKHBhc3N3b3JkKSArICJcbiIpDQogICAgICAgIHNhdmUuY2xvc2UoKQ0KICAgICAgICByZXR1cm4gVHJ1ZQ0KICAgIHJldHVybiBGYWxzZQ0KICBkZWYgYnJ1dGUoc2VsZiwgZmwpOg0KICAgIGlmIHNlbGYuc2V0cHcgPT0gRmFsc2U6DQogICAgICBzZWxmLmxvb3AgKz0gMQ0KICAgICAgZm9yIHB3IGluIGZsWyJwdyJdOg0KICAgICAgICB1c2VybmFtZSA9IGZsWyJpZCJdLmxvd2VyKCkNCiAgICAgICAgcGFzc3dvcmQgPSBwdy5sb3dlcigpDQogICAgICAgIHRyeToNCiAgICAgICAgICBpZiBzZWxmLmJydXRlUmVxdWVzdCh1c2VybmFtZSwgcGFzc3dvcmQpID09IFRydWU6DQogICAgICAgICAgICBicmVhaw0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgY29udGludWUNCiAgICAgICAgcHJpbnQoKCJcclx4MWJbMDszN20gW1wwMzNbMDs5Nm1DcmFja1wwMzNbMDs5N21dXHgxYlswOzM3bSAlcy8lcyBceDFiWzA7MzdtT0sgOiAlcyBceDFiWzA7MzdtQ1AgOiAlc1x4MWJbMDszN20iJShzZWxmLmxvb3AsbGVuKHNlbGYuZmwpLGxlbihzZWxmLm9rKSxsZW4oc2VsZi5jcCkpKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQogICAgZWxzZToNCiAgICAgIHNlbGYubG9vcCArPSAxDQogICAgICBmb3IgcHcgaW4gc2VsZi5zZXRwdzoNCiAgICAgICAgdXNlcm5hbWUgPSB1c2Vyc1siaWQiXS5sb3dlcigpDQogICAgICAgIHBhc3N3b3JkID0gcHcubG93ZXIoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgaWYgc2VsZi5icnV0ZVJlcXVlc3QodXNlcm5hbWUsIHBhc3N3b3JkKSA9PSBUcnVlOg0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgIHByaW50KCgiXHJceDFiWzA7MzdtIFtcMDMzWzA7OTZtQ3JhY2tcMDMzWzA7OTdtXVx4MWJbMDszN20gJXMvJXMgXHgxYlswOzM3bU9LIDogJXMgXHgxYlswOzM3bUNQIDogJXNceDFiWzA7MzdtIiUoc2VsZi5sb29wLGxlbihzZWxmLmZsKSxsZW4oc2VsZi5vayksbGVuKHNlbGYuY3ApKSksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQ0KDQpjbGFzcyBiYXBpdHRsOg0KICBkZWYgX19pbml0X18oc2VsZixpc2lmaWxlKToNCiAgICBzZWxmLnNldHB3ID0gRmFsc2UNCiAgICBzZWxmLm9rID0gW10NCiAgICBzZWxmLmNwID0gW10NCiAgICBzZWxmLmxvb3AgPSAwDQogICAgc2VsZi5rcmFoKGlzaWZpbGUpDQogIGRlZiBrcmFoKHNlbGYsaXNpZmlsZSk6DQogICAgcHJpbnQoKHArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIENyYWNrIFdpdGggUGFzcyBEZWZhdWx0L01hbnVhbCBbZC9tXSIpKQ0KICAgIHdoaWxlIFRydWU6DQogICAgICBmPWlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDaG9vc2UgOiAiKQ0KICAgICAgaWYgZiBpblsiIiwiICJdOg0KICAgICAgICBwcmludCgocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEludmFsaWQgTnVtYmVyIikpDQogICAgICAgIGNvbnRpbnVlDQogICAgICBlbGlmIGYgaW5bIm0iLCJNIl06DQogICAgICAgIHRyeToNCiAgICAgICAgICB3aGlsZSBUcnVlOg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICBzZWxmLmFwaz1pc2lmaWxlDQogICAgICAgICAgICAgIHNlbGYuZnM9b3BlbihzZWxmLmFwaykucmVhZCgpLnNwbGl0bGluZXMoKQ0KICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgICBwcmludCgoaysiWyIrcCsiISIraysiXSIrcCsiICVzIiVlKSkNCiAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICBzZWxmLmZsPVtdDQogICAgICAgICAgcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBFeGFtcGxlIDogc2F5YW5nLGtvbnRvbCwxMjM0NTYiKSkNCiAgICAgICAgICBzZWxmLnB3PWlucHV0KHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBQYXNzd29yZCBMaXN0IDogIikuc3BsaXQoIiwiKQ0KICAgICAgICAgIGlmIGxlbihzZWxmLnB3KSA9PTA6DQogICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgIGZvciBpIGluIHNlbGYuZnM6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgIHNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIjw9PiIpWzBdLCJwdyI6c2VsZi5wd30pDQogICAgICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICBwcmludCgoIiAgJXMiJWUpKQ0KICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgIHByaW50KChwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBDcmFjayBTdGFydGVkLi4uIitwKyJcbiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBBY2NvdW50IFtPS10gU2F2ZWQgdG8gOiBvay50eHQiK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW0NQXSBTYXZlZCB0byA6IGNwLnR4dCIpKQ0KICAgICAgICBUaHJlYWRQb29sKDMwKS5tYXAoc2VsZi5icnV0ZSxzZWxmLmZsKQ0KICAgICAgICAjb3MucmVtb3ZlKHNlbGYuYXBrKQ0KICAgICAgICBleGl0KCkNCiAgICAgICAgYnJlYWsNCiAgICAgIGVsaWYgZiBpblsiZCIsIkQiXToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgIHdoaWxlIFRydWU6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgIHNlbGYuYXBrPWlzaWZpbGUNCiAgICAgICAgICAgICAgc2VsZi5mcz1vcGVuKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICAgIHByaW50KGUpDQogICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgc2VsZi5mbD1bXQ0KICAgICAgICAgIGZvciBpIGluIHNlbGYuZnM6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgIHNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIjw9PiIpWzBdLCJwdyI6Z2VuZXJhdGUoaS5zcGxpdCgiPD0+IilbMV0pfSkNCiAgICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgY29udGludWUNCiAgICAgICAgcHJpbnQoKHArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIENyYWNrIFN0YXJ0ZWQuLi4iK3ArIlxuIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIEFjY291bnQgW09LXSBTYXZlZCB0byA6IG9rLnR4dCIrcCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gQWNjb3VudCBbQ1BdIFNhdmVkIHRvIDogY3AudHh0IikpDQogICAgICAgIFRocmVhZFBvb2woMzApLm1hcChzZWxmLmJydXRlLHNlbGYuZmwpDQogICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykNCiAgICAgICAgZXhpdCgpDQogICAgICAgIGJyZWFrDQogIGRlZiBicnV0ZVJlcXVlc3Qoc2VsZiwgdXNlcm5hbWUsIHBhc3N3b3JkKToNCiAgICBnbG9iYWwgb2ssY3AsdHRsDQogICAgcGFyYW1zID0geyJhY2Nlc3NfdG9rZW4iOiAiMzUwNjg1NTMxNzI4JTdDNjJmOGNlOWY3NGIxMmY4NGMxMjNjYzIzNDM3YTRhMzIiLCAgImZvcm1hdCI6ICJKU09OIiwgInNka192ZXJzaW9uIjogIjIiLCAiZW1haWwiOiB1c2VybmFtZSwgImxvY2FsZSI6ICJlbl9VUyIsICJwYXNzd29yZCI6IHBhc3N3b3JkLCAic2RrIjogImlvcyIsICJnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMiOiAiMSIsICJzaWciOiAiM2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYifQ0KICAgIGFwaSA9ICJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbiINCiAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldChhcGksIHBhcmFtcz1wYXJhbXMpDQogICAgaWYgcmUuc2VhcmNoKCIoRUFBQSlcXHcrIiwgcmVzcG9uc2UudGV4dCk6DQogICAgICBzZWxmLm9rLmFwcGVuZCh1c2VybmFtZSArICIg4oCiICIgKyBwYXNzd29yZCkNCiAgICAgIHByaW50KCgiXHJceDFiWzA7MzJtICogLS0+ICVzIOKAoiAlcyAlcyAgICAgICAgICAgICAgICIlKHVzZXJuYW1lLHBhc3N3b3JkLE4pKSkNCiAgICAgIG9rLmFwcGVuZCh1c2VybmFtZSArICIg4oCiICIgKyBwYXNzd29yZCkNCiAgICAgIHNhdmUgPSBvcGVuKCJvay50eHQiLCAiYSIpDQogICAgICBzYXZlLndyaXRlKHN0cih1c2VybmFtZSkgKyAiIOKAoiAiICsgc3RyKHBhc3N3b3JkKSArICJcbiIpDQogICAgICBzYXZlLmNsb3NlKCkNCiAgICAgIHJldHVybiBUcnVlDQogICAgZWxzZToNCiAgICAgIGlmICJ3d3cuZmFjZWJvb2suY29tIiBpbiByZXNwb25zZS5qc29uKClbImVycm9yX21zZyJdOg0KICAgICAgICB0cnk6DQogICAgICAgICAga2U9cmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK3N0cih1c2VybmFtZSkrIj9hY2Nlc3NfdG9rZW49IitvcGVuKCJsb2dpbi50eHQiLCJyIikucmVhZCgpKQ0KICAgICAgICAgIHR0PWpzb24ubG9hZHMoa2UudGV4dCkNCiAgICAgICAgICB0dGw9dHRbImJpcnRoZGF5Il0NCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgc2VsZi5jcC5hcHBlbmQodXNlcm5hbWUgKyAiIOKAoiAiICsgcGFzc3dvcmQgKyAiIOKAoiAiICsgdHRsKQ0KICAgICAgICBwcmludCgiXHJceDFiWzA7MzNtICogLS0+ICVzIOKAoiAlcyDigKIgJXMgICAiJSh1c2VybmFtZSxwYXNzd29yZCx0dGwpKQ0KICAgICAgICBzYXZlID0gb3BlbigiY3AudHh0IiwgImErIikNCiAgICAgICAgc2F2ZS53cml0ZShzdHIodXNlcm5hbWUpICsgInwiICsgc3RyKHBhc3N3b3JkKSArICJ8Iisgc3RyKHR0bCkrIlxuIikNCiAgICAgICAgc2F2ZS5jbG9zZSgpDQogICAgICAgIHJldHVybiBUcnVlDQogICAgcmV0dXJuIEZhbHNlDQogIGRlZiBicnV0ZShzZWxmLCBmbCk6DQogICAgaWYgc2VsZi5zZXRwdyA9PSBGYWxzZToNCiAgICAgIHNlbGYubG9vcCArPSAxDQogICAgICBmb3IgcHcgaW4gZmxbInB3Il06DQogICAgICAgIHVzZXJuYW1lID0gZmxbImlkIl0ubG93ZXIoKQ0KICAgICAgICBwYXNzd29yZCA9IHB3Lmxvd2VyKCkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgIGlmIHNlbGYuYnJ1dGVSZXF1ZXN0KHVzZXJuYW1lLCBwYXNzd29yZCkgPT0gVHJ1ZToNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICBjb250aW51ZQ0KICAgICAgICBwcmludCgoIlxyXHgxYlswOzM3bSBbXDAzM1swOzk2bUNyYWNrXDAzM1swOzk3bV1ceDFiWzA7MzdtICVzLyVzIFx4MWJbMDszN21PSyA6ICVzIFx4MWJbMDszN21DUCA6ICVzXHgxYlswOzM3bSIlKHNlbGYubG9vcCxsZW4oc2VsZi5mbCksbGVuKHNlbGYub2spLGxlbihzZWxmLmNwKSkpLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICBlbHNlOg0KICAgICAgc2VsZi5sb29wICs9IDENCiAgICAgIGZvciBwdyBpbiBzZWxmLnNldHB3Og0KICAgICAgICB1c2VybmFtZSA9IHVzZXJzWyJpZCJdLmxvd2VyKCkNCiAgICAgICAgcGFzc3dvcmQgPSBwdy5sb3dlcigpDQogICAgICAgIHRyeToNCiAgICAgICAgICBpZiBzZWxmLmJydXRlUmVxdWVzdCh1c2VybmFtZSwgcGFzc3dvcmQpID09IFRydWU6DQogICAgICAgICAgICBicmVhaw0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgY29udGludWUNCiAgICAgICAgcHJpbnQoKCJcclx4MWJbMDszN20gW1wwMzNbMDs5Nm1DcmFja1wwMzNbMDs5N21dXHgxYlswOzM3bSAlcy8lcyBceDFiWzA7MzdtT0sgOiAlcyBceDFiWzA7MzdtQ1AgOiAlc1x4MWJbMDszN20iJShzZWxmLmxvb3AsbGVuKHNlbGYuZmwpLGxlbihzZWxmLm9rKSxsZW4oc2VsZi5jcCkpKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpDQoNCiMjIyBSZXN1bHQgSGFzaWxsICMjIyMNCmRlZiBjZWtfb3BzaSgpOg0KCXByaW50KCJcbiAqIExvZ2luIGZyZWUuZmFjZWJvb2suY29tIikNCglwcmludCgiICogbWFzdWthbiBmaWxlIChSZWZlcmVuc2k6IGNwLnR4dCkiKQ0KCWZpbGVzID0gaW5wdXQoIiA/IG5hbWEgZmlsZSAgOiAiKQ0KCWlmIGZpbGVzID09ICIiOg0KCQltb2NoX3lheWFuKCkNCgl0cnk6DQoJCWJ1a2FfYmFqdSA9IG9wZW4oZmlsZXMsICJyIikucmVhZGxpbmVzKCkNCglleGNlcHQgSU9FcnJvcjoNCgkJZXhpdCgiXG4gISBuYW1hIGZpbGUgJXMgdGlkYWsgdGVyc2VkaWEiJShmaWxlcykpDQoJcHJpbnQoIiArIHRvdGFsIGFrdW4gOiAiK3N0cihsZW4oYnVrYV9iYWp1KSkpDQoJcHJpbnQoIiAqIHNlZGFuZyBwcm9zZXNzIGNlayBha3VuLi4uLiIpDQoJZm9yIG1lbWVrIGluIGJ1a2FfYmFqdToNCgkJa29udG9sID0gbWVtZWsucmVwbGFjZSgiXG4iLCIiKQ0KCQl0aXRpZCAgPSBrb250b2wuc3BsaXQoInwiKQ0KCQlwcmludCgiXG4gKyBjZWsgYWt1biA6ICIra29udG9sLnJlcGxhY2UoIiArICIsIiIpKQ0KCQl0cnk6DQoJCQljaGVja19pbih0aXRpZFswXS5yZXBsYWNlKCIgKyAiLCIiKSwgdGl0aWRbMV0pDQoJCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoNCgkJCXBhc3MNCglpbnB1dCgiXG4gKyBwZW5jZXQgZW50ZXIgdW50dWsga2VtYmFsaSBrZSBtZW51Li4uLiIpDQoJbWVudSgpDQoNCmRlZiBjaGVja19pbih1c2VyLCBwYXN3KToNCgltYiA9ICgiaHR0cHM6Ly9mcmVlLmZhY2Vib29rLmNvbSIpDQoJdWEgPSAoIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgTWkgOVQgUHJvIEJ1aWxkL1FLUTEuMTkwODI1LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OC4wLjQzMjQuMTgxIE1vYmlsZSBTYWZhcmkvNTM3LjM2W0ZCQU4vRU1BO0ZCTEMvaWRfSUQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdIikNCglzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCgkjLT4gcGVtaXNhaA0KCXNlcy5oZWFkZXJzLnVwZGF0ZSh7Ikhvc3QiOiAibS5mYWNlYm9vay5jb20iLCJjYWNoZS1jb250cm9sIjogIm1heC1hZ2U9MCIsInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiAiMSIsIm9yaWdpbiI6IG1iLCJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwidXNlci1hZ2VudCI6IHVhLCJhY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsIngtcmVxdWVzdGVkLXdpdGgiOiAibWFyay52aWEuZ3AiLCJzZWMtZmV0Y2gtc2l0ZSI6ICJzYW1lLW9yaWdpbiIsInNlYy1mZXRjaC1tb2RlIjogIm5hdmlnYXRlIiwic2VjLWZldGNoLXVzZXIiOiAiPzEiLCJzZWMtZmV0Y2gtZGVzdCI6ICJkb2N1bWVudCIsInJlZmVyZXIiOiBtYisiL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsImFjY2VwdC1lbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43In0pDQoJZGF0YSA9IHt9DQoJZ2VkID0gcGFyc2VyKHNlcy5nZXQobWIrIi9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCBoZWFkZXJzPXsidXNlci1hZ2VudCI6dWF9KS50ZXh0LCAiaHRtbC5wYXJzZXIiKQ0KCWZtID0gZ2VkLmZpbmQoImZvcm0iLHsibWV0aG9kIjoicG9zdCJ9KQ0KCWxpc3QgPSBbImxzZCIsImphem9lc3QiLCJtX3RzIiwibGkiLCJ0cnlfbnVtYmVyIiwidW5yZWNvZ25pemVkX3RyaWVzIiwibG9naW4iLCJiaV94cndoIl0NCglmb3IgaSBpbiBmbS5maW5kX2FsbCgiaW5wdXQiKToNCgkJaWYgaS5nZXQoIm5hbWUiKSBpbiBsaXN0Og0KCQkJZGF0YS51cGRhdGUoe2kuZ2V0KCJuYW1lIik6aS5nZXQoInZhbHVlIil9KQ0KCQllbHNlOg0KCQkJY29udGludWUNCglkYXRhLnVwZGF0ZSh7ImVtYWlsIjp1c2VyLCJwYXNzIjpwYXN3fSkNCglydW4gPSBwYXJzZXIoc2VzLnBvc3QobWIrZm0uZ2V0KCJhY3Rpb24iKSwgZGF0YT1kYXRhLCBhbGxvd19yZWRpcmVjdHM9VHJ1ZSkudGV4dCwgImh0bWwucGFyc2VyIikNCglpZiAiY2hlY2twb2ludCIgaW4gc2VzLmNvb2tpZXM6DQoJCWZvcm0gPSBydW4uZmluZCgiZm9ybSIpDQoJCWR0c2cgPSBmb3JtLmZpbmQoImlucHV0Iix7Im5hbWUiOiJmYl9kdHNnIn0pWyJ2YWx1ZSJdDQoJCWp6c3QgPSBmb3JtLmZpbmQoImlucHV0Iix7Im5hbWUiOiJqYXpvZXN0In0pWyJ2YWx1ZSJdDQoJCW5oICAgPSBmb3JtLmZpbmQoImlucHV0Iix7Im5hbWUiOiJuaCJ9KVsidmFsdWUiXQ0KCQlkYXRhRCA9IHsiZmJfZHRzZyI6IGR0c2csImZiX2R0c2ciOiBkdHNnLCJqYXpvZXN0IjoganpzdCwiamF6b2VzdCI6IGp6c3QsImNoZWNrcG9pbnRfZGF0YSI6IiIsInN1Ym1pdFtDb250aW51ZV0iOiJMYW5qdXRrYW4iLCJuaCI6IG5ofQ0KCQl4bnh4ID0gcGFyc2VyKHNlcy5wb3N0KG1iK2Zvcm1bImFjdGlvbiJdLCBkYXRhPWRhdGFEKS50ZXh0LCAiaHRtbC5wYXJzZXIiKQ0KCQluZ2V3ID0gW3l5LnRleHQgZm9yIHl5IGluIHhueHguZmluZF9hbGwoIm9wdGlvbiIpXQ0KCQlwcmludCgiICsgdGVyZGFwYXQgIitzdHIobGVuKG5nZXcpKSsiIG9wc2kgIikNCgkJZm9yIG9wdCBpbiByYW5nZShsZW4obmdldykpOg0KCQkJcHJpbnQoIiAgICIrc3RyKG9wdCsxKSsiICIrbmdld1tvcHRdKQ0KCWVsaWYgImxvZ2luX2Vycm9yIiBpbiBzdHIocnVuKToNCgkJb2ggPSBydW4uZmluZCgiZGl2Iix7ImlkIjoibG9naW5fZXJyb3IifSkuZmluZCgiZGl2IikudGV4dA0KCQlwcmludCgiICEgJXMiJShvaCkpDQoJZWxzZToNCgkJcHJpbnQoIiAhIGxvZ2luIGdhZ2FsLCBzaWxhaGthbiBjZWsga2VtYmFsaSBpZCBkYW4gcGFzc3dvcmQiKQ0KDQpkZWYgcmVzdWx0cyhrbnRsLHplY2hlZWQpOg0KICAgICAgICBpZiBsZW4oa250bCkgIT0wOg0KICAgICAgICAgICAgICAgIHByaW50KChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gT0s6ICIrc3RyKGxlbihrbnRsKSkpKQ0KICAgICAgICBpZiBsZW4oemVjaGVlZCkgIT0wOg0KICAgICAgICAgICAgICAgIHByaW50KChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gQ1A6ICIrc3RyKGxlbih6ZWNoZWVkKSkpKQ0KICAgICAgICBpZiBsZW4oa250bCkgPT0wIGFuZCBsZW4oemVjaGVlZCkgPT0wOg0KICAgICAgICAgICAgICAgIHByaW50KCJcbiIpDQogICAgICAgICAgICAgICAgcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBObyBSZXN1bHQgRm91bmQiKSkNCiAgIA0KZGVmIHJlc3MoKToNCiAgICBvcy5zeXN0ZW0oImNsZWFyIikNCiAgICBiYW5uZXIoKQ0KICAgIHByaW50KChwKyIgWyIraysi4oCiIittKyLigKIiK3ArIl0gUmVzdWx0IENyYWNrZXIiK3ArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSAiKSkNCiAgICBwcmludCgocCsiXG4gWyIraysi4oCiIittKyLigKIiK3ArIl0gUmVzdWx0IE9LICIpKQ0KICAgIHRyeToNCiAgICAgICAgb3Muc3lzdGVtKCJjYXQgb2sudHh0IikNCiAgICBleGNlcHQgSU9FcnJvcjoNCiAgICAgICAgcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBObyBSZXN1bHQgRm91bmQiKSkNCiAgICBwcmludCgocCsiIFsiK2srIuKAoiIrbSsi4oCiIitwKyJdIFJlc3VsdCBDUCIpKQ0KICAgIHRyeToNCiAgICAgICAgb3Muc3lzdGVtKCJjYXQgY3AudHh0IikNCiAgICBleGNlcHQgSU9FcnJvcjoNCiAgICAgICAgcHJpbnQoKHArIiBbIitrKyLigKIiK20rIuKAoiIrcCsiXSBObyBSZXN1bHQgRm91bmQiKSkNCiAgICBpbnB1dChwKyIgW0JBQ0tdIikNCiAgICBtZW51KCkNCg0KaWYgX19uYW1lX189PSJfX21haW5fXyI6DQoJbWVudSgpDQo='))
